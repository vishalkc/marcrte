{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/codemirror.js","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///(webpack)/buildin/module.js","webpack:///./app.js","webpack:///./lib/show-hint.js","webpack:///./lib/simple.js","webpack:///./lib/codemirror.css?df81","webpack:///./lib/codemirror.css","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./lib/show-hint.css?95a9","webpack:///./lib/show-hint.css","webpack:///./lib/docs.css?d1bf","webpack:///./lib/docs.css","webpack:///./node_modules/js-polyfills/es6.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","factory","userAgent","navigator","platform","gecko","test","ie_upto10","ie_11up","exec","edge","ie","ie_version","document","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","match","Number","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","range","rmClass","node","current","className","after","slice","index","length","removeChildren","e","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","elt","tag","content","style","createElement","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","joinClasses","a","b","as","split","createRange","start","end","endNode","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","f","args","Array","arguments","apply","copyObj","obj","target","overwrite","prop","countColumn","string","tabSize","startIndex","startValue","search","nextTab","indexOf","selectionStart","selectionEnd","_e","Delayed","this","id","array","set","ms","clearTimeout","setTimeout","scrollerGap","Pass","toString","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","Math","min","spaceStrs","spaceStr","push","lst","arr","map","out","nothing","createObj","base","props","inst","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","toLowerCase","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","str","dir","charAt","findFirst","pred","from","to","midF","mid","ceil","floor","bidiOther","getBidiPartAt","order","sticky","found","cur","bidiOrdering","lowTypes","arabicTypes","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","direction","outerType","code","len","types","i$1","prev","type","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","replace","j","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","i$7","at","j$2","splice","nstart","unshift","reverse","getOrder","line","text","noHandlers","on","emitter","addEventListener","attachEvent","map$$1","_handlers","concat","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","cm","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","result","nl","rt","hasSelection","window","getSelection","te","range$$1","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","resolveMode","spec","getMode","options","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","val","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","doc","first","size","Error","chunk","lines","children","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","height","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","String","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","max","clipPos","last","linelen","clipToLen","clipPosArray","eol","sol","peek","undefined","next","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","token","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","startCh","endCh","isInsert","old","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","offset","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","find","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","found$1","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","list","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","ext","built","background","wrap","insertBefore","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","k","gutterSpecs","gutterWidth","alignable","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","data","parseInt","paddingRight","isNaN","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","abs","bottom","top","ensureLineHeights","place","nodeAndOffsetInLineMap","coverStart","coverEnd","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","widgetHeight$$1","ltr","_lineNo","ref","closestDist","endX","dist","baseX","chAround","boxAround","atLeft","atStart","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","head","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","add","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","readOnly","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","native","null","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","updatedDisplay","mustUpdate","updateDisplayIfNeeded","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","DisplayUpdate","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","scrollIntoView","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","time","highlight","highlightWorker","Date","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","hasFocus","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","updateLine","linesFor","firstLine","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","NaN","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","mark","parts","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","v","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","curLine","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","join","lineSeparator","setValue","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","hint","oldPrev","newPrev","computeReplacedSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","CodeMirror","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","loadFile","file","allowDropFileTypes","reader","onload","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","handled","up","showCrossHair","onKeyUp","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","dragStart","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","move","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","word","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","src","_top","onDragStart","inp","getField","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","findPosH","origDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","sawType","getHelper","hitSide","findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","textContent","previousSibling","dist$1","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","closing","extraLinebreak","close","addText","walk","cmText","markerID","isBlock","nodeName","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","scrollTo","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","_typeof","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","rtlMoveVisually","goalColumn","goals","startChar","check","getScrollInfo","scrollToRange","interpret","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","method","contenteditable","defineMode","dependencies","defineMIME","mime","defineExtension","func","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","version","__WEBPACK_AMD_DEFINE_RESULT__","define","__WEBPACK_AMD_DEFINE_FACTORY__","useSourceMap","item","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules","_i","fn","memo","stylesInDom","isOldIE","all","atob","getElement","styleTarget","HTMLIFrameElement","contentDocument","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","domStyle","refs","addStyle","listToStyles","newStyles","media","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","removeStyleElement","idx","createStyleElement","attrs","nonce","nc","getNonce","addAttrs","el","forEach","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","Boolean","cssNode","webpackPolyfill","deprecate","paths","getElementById","editor","editor1","hyperlinkOverlay","startPosition","includes","trim","leadingSpaceCount","substring","isUrl","overlayClass","onToken","classList","previousElementSibling","innerText","alert","hoverWidgetOnOverlay","javascript","javascript1","currentCursor","showHint","Alt-C","changeObj","HINT_ELEMENT_CLASS","ACTIVE_HINT_ELEMENT_CLASS","Completion","debounce","tick","startPos","startLen","self","activityFunc","getHints","async","newOpts","hintOptions","defaultOptions","resolve","parseOptions","selections","supportsSelection","completionActive","completion","requestAnimationFrame","cancelAnimationFrame","getText","getHintElement","hintsElement","Widget","picked","parentWindow","defaultView","hints","selectedHint","completions","render","hintId","alignWithWord","below","offsetParentPosition","bodyPosition","winW","innerWidth","winH","overlapY","scrolls","startScroll","closingOnBlur","overlapX","baseMap","moveFocus","menuSize","setFocus","pick","custom","customKeys","ourMap","addBinding","extra","buildKeyMap","avoidWrap","changeActive","screenAmount","closeOnUnfocus","onScroll","curScroll","point","completeOnSingleClick","fetchHints","callback","then","closeCharacters","disable","myTick","finishUpdate","completeSingle","words","resolved","app","applicableHelpers","run","fromList","anyword","term","autocomplete","auto","require","__WEBPACK_AMD_DEFINE_ARRAY__","ensureState","states","toRegex","caret","flags","ignoreCase","Rule","regex","asToken","tokenFunction","config","pending","pend","local","tok","endToken","localState","endScan","curState","rule","matches","stack","enterLocalMode","dedent","pers","persistent","persistentStates","lState","forceEnd","indentFunction","meta","textAfter","dontIndentStates","rules","dedentIfLineStart","defineSimpleMode","simpleMode","states_","hasIndentation","orig","hmr","locals","location","baseUrl","protocol","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","__cons","eval","_","global","OVERRIDE_NATIVE_FOR_TESTING","strict","getPropertyDescriptor","desc","getOwnPropertyDescriptor","proto","getPrototypeOf","nativePromise","nativeSetImmediate","enqueue","job","console","assert","configurable","writable","set_internal","$isNaN","$parseInt","$parseFloat","parseFloat","E","LOG10E","LOG2E","exp","log","pow","random","sqrt","orig_match","orig_replace","orig_search","orig_split","EphemeronTable","secretKey","ObjectCreate","reveal","valueOf","secrets","HasOwnProperty","defaultValue","has","oValueOf","writeable","conceal","symbolForKey","secret","symbolMap","GlobalSymbolRegistry","description","TypeError","descString","stringKey","SameValue","newSymbol","[[key]]","[[symbol]]","sym","$IteratorPrototype$","Type","$$iterator","iterator","$$match","$$replace","$$search","$$split","$$toStringTag","ToInteger","ToUint32","ToObject","ToLength","IsCallable","IsConstructor","SameValueZero","GetMethod","GetV","HasProperty","GetIterator","IteratorValue","iterResult","IteratorStep","IteratorNext","CreateIterResultObject","EnqueueJob","queueName","internalSlotsList","sourcesIndex","nextSource","getOwnPropertyNames","keysIndex","nextKey","propValue","nativeSymbols","$getOwnPropertyNames","$keys","$window_names","isStringKey","value1","value2","__proto__","o_p_ts","number","clz8","Float32Array","values","sawNaN","sum","al","bl","imul","faux","string_regexp_dispatch","StringIterator","codePoints","elements","nextIndex","nextCP","RangeError","template","substitutions","rawValue","raw","literalSegments","stringElements","nextSeg","nextSub","second","searchString","endPosition","searchStr","searchLength","regexp","rx","searchValue","replaceValue","separator","kind","$StringIteratorPrototype$","cp","codePointAt","fromCodePoint","lastIndexOf","items","mapfn","thisArg","mapping","usingIterator","nextValue","mappedValue","arrayLike","kValue","relativeTarget","relativeEnd","final","relativeStart","fromKey","toKey","fromVal","nativeArrayIteratorMethods","entries","ArrayIterator","CreateArrayIterator","pk","testResult","$ArrayIteratorPrototype$","elementKey","elementValue","itemKind","$TypedArrayName$","$TypedArray$","copyWithin","every","callbackfn","kept","captured","findIndex","reduce","reduceRight","some","comparefn","Map","iterable","adder","nextItem","MapDataIndexOf","mapData","MapIterator","CreateMapIterator","$MapIteratorPrototype$","Set","SetDataIndexOf","SetIterator","CreateSetIterator","$SetIteratorPrototype$","WeakMap","wm","M","WeakSet","S","ArrayBuffer","arg","buffer","DataView","CreateResolvingFunctions","promise","F","alreadyResolved","[[value]]","resolution","selfResolutionError","RejectPromise","FulfillPromise","PromiseResolveThenableJob","reject","reason","PromiseRejectFunction","[[Resolve]]","[[Reject]]","reactions","TriggerPromiseReactions","NewPromiseCapability","promiseCapability","executor","constructorResult","CreatePromiseCapabilityRecord","IsPromise","argument","PromiseReactionJob","reaction","handlerResult","handler","promiseToResolve","thenable","resolvingFunctions","thenCallResult","Promise","InitializePromise","PromiseAllResolveElementFunction","alreadyCalled","remainingElementsCount","nextPromise","resolveElement","onRejected","onFulfilled","fulfillReaction","[[Capabilities]]","[[Handler]]","rejectReaction","cast","Reflect","thisArgument","argumentsList","Function","propertyKey","visited","Enumerate","receiver","isExtensible","preventExtensions"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {this.id = null;};\n  Delayed.prototype.set = function (ms, f) {\n    clearTimeout(this.id);\n    this.id = setTimeout(f, ms);\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 30;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map$$1 = emitter._handlers || (emitter._handlers = {});\n      map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map$$1 = emitter._handlers, arr = map$$1 && map$$1[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range$$1;\n    try {range$$1 = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range$$1 || range$$1.parentElement() != te) { return false }\n    return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n    var line = getLine(doc, lineNo$$1);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (node.className == \"CodeMirror-linewidget\")\n        { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map$$1, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map$$1.length; i += 3) {\n      mStart = map$$1[i];\n      mEnd = map$$1[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map$$1[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n            node = map$$1[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n            node = map$$1[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = true; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, true, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight$$1 = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo$$1, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight$$1; box.bottom += widgetHeight$$1;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight$$1 <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo$$1, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top || y >= coords.bottom;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo$$1, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo$$1, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo$$1, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor]);\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range$$1 = doc.sel.ranges[i];\n      if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range$$1.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range$$1.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range$$1, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range$$1, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range$$1.from(), sTo = range$$1.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n        cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      onBlur(cm);\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range$$1) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range$$1;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range$$1 = cm.curOp.scrollToPos;\n    if (range$$1) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range$$1.from), to = estimateCoords(cm, range$$1.to);\n      scrollToCoordsRange(cm, from, to, range$$1.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt$$1 != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range$$1 = document.createRange();\n      range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range$$1.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range$$1);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight$$1);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight$$1)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range$$1 = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range$$1.head; }\n      else if (start == \"anchor\") { pos = range$$1.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range$$1.to(); }\n      else { pos = range$$1.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range$$1 = sel.ranges[i];\n        changes[i] = {from: range$$1.from(), to: range$$1.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {this.history = new History(this.history.maxGeneration);},\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo$$1 = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to ||\n                span.from == null && lineNo$$1 != from.line ||\n                span.from != null && lineNo$$1 == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo$$1;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo$$1 = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo$$1;\n      });\n      return clipPos(this, Pos(lineNo$$1, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var loadFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n          { return }\n\n        var reader = new FileReader;\n        reader.onload = operation(cm, function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) { content = \"\"; }\n          text[i] = content;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map$$1, handle, context) {\n    map$$1 = getKeyMap(map$$1);\n    var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map$$1.fallthrough) {\n      if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map$$1.fallthrough, handle, context) }\n      for (var i = 0; i < map$$1.fallthrough.length; i++) {\n        var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if (webkit || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus(); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    delayBlurEvent(cm);\n    setTimeout(function () { return display.input.focus(); }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range$$1 = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend); }\n      else\n        { ourRange = range$$1; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range$$1.anchor, anchor) > 0) {\n          head = range$$1.head;\n          anchor = minPos(oldRange.from(), range$$1.anchor);\n        } else {\n          head = range$$1.anchor;\n          anchor = maxPos(oldRange.to(), range$$1.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range$$1) {\n    var anchor = range$$1.anchor;\n    var head = range$$1.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range$$1 }\n    var order = getOrder(anchorLine);\n    if (!order) { return range$$1 }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range$$1 }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range$$1 }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range$$1 : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(bind(onFocus, this), 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range$$1 = sel.ranges[i$1];\n      var from = range$$1.from(), to = range$$1.to();\n      if (range$$1.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range$$1 = sel.ranges[i];\n      if (range$$1.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range$$1.head.line)) { continue }\n      var mode = cm.getModeAt(range$$1.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range$$1.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch)))\n          { indented = indentLine(cm, range$$1.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range$$1.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map$$1, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n      },\n      removeKeyMap: function(map$$1) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map$$1 || maps[i].name == map$$1) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range$$1 = ranges[i];\n          if (!range$$1.empty()) {\n            var from = range$$1.from(), to = range$$1.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range$$1.head.line > end) {\n            indentLine(this, range$$1.head.line, how, true);\n            end = range$$1.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range$$1 = this.doc.sel.primary();\n        if (start == null) { pos = range$$1.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range$$1.from() : range$$1.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range$$1) {\n          if (this$1.display.shift || this$1.doc.extend || range$$1.empty())\n            { return findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range$$1.from() : range$$1.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range$$1) {\n            var other = findPosH(doc, range$$1.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range$$1.head} : {from: range$$1.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range$$1) {\n          if (collapse)\n            { return dir < 0 ? range$$1.from() : range$$1.to() }\n          var headPos = cursorCoords(this$1, range$$1.head, \"div\");\n          if (range$$1.goalColumn != null) { headPos.left = range$$1.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range$$1 == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range$$1, margin) {\n        if (range$$1 == null) {\n          range$$1 = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range$$1 == \"number\") {\n          range$$1 = {from: Pos(range$$1, 0), to: null};\n        } else if (range$$1.from == null) {\n          range$$1 = {from: range$$1, to: null};\n        }\n        if (!range$$1.to) { range$$1.to = range$$1.from; }\n        range$$1.margin = margin || 0;\n\n        if (range$$1.from.line != null) {\n          scrollToRange(this, range$$1);\n        } else {\n          scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo$$1 = this.display.viewFrom;\n        this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo$$1, \"widget\"); break } } }\n          ++lineNo$$1;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    function findNextLine() {\n      var l = pos.line + dir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    on(div, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = this.cm.state.focused;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor())\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range$$1;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range$$1 = found[0].find(0)))\n            { addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map$$1 = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map$$1.length; j += 3) {\n          var curNode = map$$1[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map$$1[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map$$1[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, */) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.47.1\";\n\n  return CodeMirror;\n\n})));\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import * as CodeMirror from './lib/codemirror';\r\nimport './lib/show-hint';\r\nimport './lib/simple';\r\n//import './lib/polyfills'\r\nimport './lib/codemirror.css';\r\nimport './lib/show-hint.css';\r\nimport './lib/docs.css';\r\nimport 'js-polyfills/es6';\r\n\r\nvar sc = document.getElementById(\"modecode\");\r\nvar code = document.getElementById(\"code\");\r\nvar editor = CodeMirror(code, {\r\nvalue: \"\",//(sc.textContent || sc.innerText || sc.innerHTML),\r\nmode: \"simplemode\"\r\n//extraKeys: {\"Ctrl-D\": \"autocomplete\"}\r\n});\r\n\r\nvar code1 = document.getElementById(\"code1\");\r\nvar editor1 = CodeMirror(code, {\r\nvalue: \"\",//(sc.textContent || sc.innerText || sc.innerHTML),\r\nmode: \"simplemode\"\r\n//extraKeys: {\"Ctrl-D\": \"autocomplete\"}\r\n});\r\n\r\n\r\nCodeMirror.hint.javascript = function(cm) {\r\nvar inner = {from: cm.getCursor(), to: cm.getCursor(), list: []};\r\ninner.list.push({text:\"a\", displayText:\"a - test\"});  \r\ninner.list.push({text:\"b\", displayText:\"b - test\"});\r\ninner.list.push({text:\"1\", displayText:\"1 - test\"});\r\nreturn inner;\r\n};\r\n\r\nCodeMirror.hint.javascript1 = function(cm) {\r\nvar inner = {from: cm.getCursor(), to: cm.getCursor(), list: []};\r\ninner.list.push({text:\"b\", displayText:\"b - test\"});\r\ninner.list.push({text:\"a\", displayText:\"a - test\"});\r\ninner.list.push({text:\"c\", displayText:\"c - test\"});\r\nreturn inner;\r\n};\r\n\r\neditor.setOption(\"extraKeys\", {\r\nTab: function(cm) {  \r\nvar currentCursor = cm.getCursor();\r\nvar val = editor.getValue();\r\nvar ch = val.indexOf(\"\", currentCursor.ch);\r\ncm.setCursor({line: currentCursor.line, ch: ch+3})\r\n//cm.replaceSelection(\"tab\");\r\n},\r\n\"Ctrl-D\": function(cm) {    \r\ncm.replaceSelection(\"\");\r\ncm.showHint({hint: CodeMirror.hint.javascript});\r\n},  \r\n\"Alt-C\": function(cm) {    \r\ncm.replaceSelection(\"\");\r\n}\r\n});\r\n\r\n\r\neditor1.setOption(\"extraKeys\", {\r\nTab: function(cm) {    \r\ncm.replaceSelection(\"tab\");\r\n},\r\n\"Ctrl-D\": function(cm) {    \r\ncm.replaceSelection(\"\");\r\ncm.showHint({hint: CodeMirror.hint.javascript1});\r\n},  \r\n\"Alt-C\": function(cm) {    \r\ncm.replaceSelection(\"\");\r\n}\r\n});\r\n\r\neditor.setValue('a Authority data b test data c sub field data');\r\n\r\neditor.on(\"beforeChange\", function(cm, changeObj) {\r\nvar typedNewLine = changeObj.origin == '+input' && typeof changeObj.text == \"object\" && changeObj.text.join(\"\") == \"\";\r\nif (typedNewLine) {\r\n  return changeObj.cancel();\r\n}\r\n\r\nvar pastedNewLine = changeObj.origin == 'paste' && typeof changeObj.text == \"object\" && changeObj.text.length > 1;\r\nif (pastedNewLine) {\r\n  var newText = changeObj.text.join(\" \");\r\n\r\n  // trim\r\n  //newText = $.trim(newText);\r\n\r\n  return changeObj.update(null, null, [newText]);\r\n}\r\n\r\nreturn null;\r\n});\r\n\r\nhyperlinkOverlay(editor);\r\nhyperlinkOverlay(editor1);\r\nfunction hyperlinkOverlay(cm) {\r\nif (!cm) return;\r\n\r\nconst rx_word = \"\"; // Define what separates a word\r\nfunction isUrl(code, data) {\r\n  if(code == \"a\" && data.trim() == \"Authority data\"){\r\n      return true;\r\n  }\r\n  else{\r\n      return false;\r\n  }\r\n}\r\ncm.addOverlay({\r\n  token: function(stream) {\r\n      let ch = stream.peek();\r\n      let word = \"\";\r\n      let code = \"\";\r\n      let startPosition = 0;\r\n      \r\n      if (rx_word.includes(ch) || ch==='\\uE000' || ch==='\\uE001') {\r\n          stream.next();\r\n          return null;\r\n      }\r\n      while ((ch = stream.peek()) && !rx_word.includes(ch)) {\r\n          if(ch!=\" \" && code ===\"\"){\t\t\t\t\r\n              code = ch;\r\n              startPosition = startPosition + 1;\r\n          }\r\n          else {\r\n              if(code != \"\" && !(word ===\"\" && ch==\" \")){\t\r\n                  word += ch;\r\n              }\r\n              else{\t\t\t\t\r\n                  startPosition = startPosition + 1;\r\n              }\r\n          }\r\n          stream.next();\r\n      }\r\n      \r\n      if(word.trim() == \"\"){\r\n          return null;\r\n      }\r\n      \r\n      let leadingSpaceCount = word.length - word.trim().length;\r\n      stream.start = stream.start + startPosition;\r\n      if(word.substring(word.length - 1) == \" \"){\t\t\t\r\n          stream.pos = stream.pos - leadingSpaceCount;\r\n      }\r\n      if (isUrl(code, word)) return \"url\"; // CSS class: cm-url\r\n  }}, \r\n  { opaque : true }  // opaque will remove any spelling overlay etc\r\n);\r\nhoverWidgetOnOverlay(cm, 'url');\r\n}\r\n\r\nfunction hoverWidgetOnOverlay(cm, overlayClass) {\r\ncm.getWrapperElement().addEventListener('click', e => {\r\n\r\nlet onToken=e.target.classList.contains(\"cm-\"+overlayClass);\r\nif(onToken){    \r\nlet code = e.target.previousElementSibling.innerText.length>1? e.target.previousElementSibling.innerText[1]:\"\";\r\nlet data = e.target.innerText? e.target.innerText.trim():\"\";\r\nalert(\"Authority View\");//code=\"+code + \"&Data=\"+ data);\r\n}\r\n});\r\n}","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"./codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"./codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var HINT_ELEMENT_CLASS        = \"CodeMirror-hint\";\n  var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function(cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    var newOpts = {hint: getHints};\n    if (options) for (var prop in options) newOpts[prop] = options[prop];\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension(\"showHint\", function(options) {\n    options = parseOptions(this, this.getCursor(\"start\"), options);\n    var selections = this.listSelections()\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (var i = 0; i < selections.length; i++)\n        if (selections[i].head.line != selections[i].anchor.line) return;\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    var completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, \"startCompletion\", this);\n    completion.update(true);\n  });\n\n  CodeMirror.defineExtension(\"closeHint\", function() {\n    if (this.state.completionActive) this.state.completionActive.close()\n  })\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor(\"start\");\n    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\n\n    var self = this;\n    cm.on(\"cursorActivity\", this.activityFunc = function() { self.cursorActivity(); });\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {\n    return setTimeout(fn, 1000/60);\n  };\n  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close: function() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      this.cm.off(\"cursorActivity\", this.activityFunc);\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\n    },\n\n    active: function() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick: function(data, i) {\n      var completion = data.list[i];\n      if (completion.hint) completion.hint(this.cm, data, completion);\n      else this.cm.replaceRange(getText(completion), completion.from || data.from,\n                                completion.to || data.to, \"complete\");\n      CodeMirror.signal(data, \"pick\", completion);\n      this.close();\n    },\n\n    cursorActivity: function() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\n          pos.ch < this.startPos.ch || this.cm.somethingSelected() ||\n          (!pos.ch || this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        var self = this;\n        this.debounce = requestAnimationFrame(function() {self.update();});\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update: function(first) {\n      if (this.tick == null) return\n      var self = this, myTick = ++this.tick\n      fetchHints(this.options.hint, this.cm, this.options, function(data) {\n        if (self.tick == myTick) self.finishUpdate(data, first)\n      })\n    },\n\n    finishUpdate: function(data, first) {\n      if (this.data) CodeMirror.signal(this.data, \"update\");\n\n      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n\n      this.data = data;\n\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, \"shown\");\n        }\n      }\n    }\n  };\n\n  function parseOptions(cm, pos, options) {\n    var editor = cm.options.hintOptions;\n    var out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) for (var prop in editor)\n      if (editor[prop] !== undefined) out[prop] = editor[prop];\n    if (options) for (var prop in options)\n      if (options[prop] !== undefined) out[prop] = options[prop];\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\n    return out;\n  }\n\n  function getText(completion) {\n    if (typeof completion == \"string\") return completion;\n    else return completion.text;\n  }\n\n  function buildKeyMap(completion, handle) {\n    var baseMap = {\n      Up: function() {handle.moveFocus(-1);},\n      Down: function() {handle.moveFocus(1);},\n      PageUp: function() {handle.moveFocus(-handle.menuSize() + 1, true);},\n      PageDown: function() {handle.moveFocus(handle.menuSize() - 1, true);},\n      Home: function() {handle.setFocus(0);},\n      End: function() {handle.setFocus(handle.length - 1);},\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close\n    };\n\n    var mac = /Mac/.test(navigator.platform);\n\n    if (mac) {\n      baseMap[\"Ctrl-P\"] = function() {handle.moveFocus(-1);};\n      baseMap[\"Ctrl-N\"] = function() {handle.moveFocus(1);};\n    }\n\n    var custom = completion.options.customKeys;\n    var ourMap = custom ? {} : baseMap;\n    function addBinding(key, val) {\n      var bound;\n      if (typeof val != \"string\")\n        bound = function(cm) { return val(cm, handle); };\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val))\n        bound = baseMap[val];\n      else\n        bound = val;\n      ourMap[key] = bound;\n    }\n    if (custom)\n      for (var key in custom) if (custom.hasOwnProperty(key))\n        addBinding(key, custom[key]);\n    var extra = completion.options.extraKeys;\n    if (extra)\n      for (var key in extra) if (extra.hasOwnProperty(key))\n        addBinding(key, extra[key]);\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === \"LI\" && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function Widget(completion, data) {\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    var widget = this, cm = completion.cm;\n    var ownerDocument = cm.getInputField().ownerDocument;\n    var parentWindow = ownerDocument.defaultView || ownerDocument.parentWindow;\n\n    var hints = this.hints = ownerDocument.createElement(\"ul\");\n    var theme = completion.cm.options.theme;\n    hints.className = \"CodeMirror-hints \" + theme;\n    this.selectedHint = data.selectedHint || 0;\n\n    var completions = data.list;\n    for (var i = 0; i < completions.length; ++i) {\n      var elt = hints.appendChild(ownerDocument.createElement(\"li\")), cur = completions[i];\n      var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + \" \" + className;\n      elt.className = className;\n      if (cur.render) cur.render(elt, data, cur);\n      else elt.appendChild(ownerDocument.createTextNode(cur.displayText || getText(cur)));\n      elt.hintId = i;\n    }\n\n    var container = completion.options.container || ownerDocument.body;\n    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    var left = pos.left, top = pos.bottom, below = true;\n    var offsetLeft = 0, offsetTop = 0;\n    if (container !== ownerDocument.body) {\n      // We offset the cursor position because left and top are relative to the offsetParent's top left corner.\n      var isContainerPositioned = ['absolute', 'relative', 'fixed'].indexOf(parentWindow.getComputedStyle(container).position) !== -1;\n      var offsetParent = isContainerPositioned ? container : container.offsetParent;\n      var offsetParentPosition = offsetParent.getBoundingClientRect();\n      var bodyPosition = ownerDocument.body.getBoundingClientRect();\n      offsetLeft = (offsetParentPosition.left - bodyPosition.left - offsetParent.scrollLeft);\n      offsetTop = (offsetParentPosition.top - bodyPosition.top - offsetParent.scrollTop);\n    }\n    hints.style.left = (left - offsetLeft) + \"px\";\n    hints.style.top = (top - offsetTop) + \"px\";\n\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    var winW = parentWindow.innerWidth || Math.max(ownerDocument.body.offsetWidth, ownerDocument.documentElement.offsetWidth);\n    var winH = parentWindow.innerHeight || Math.max(ownerDocument.body.offsetHeight, ownerDocument.documentElement.offsetHeight);\n    container.appendChild(hints);\n    var box = hints.getBoundingClientRect(), overlapY = box.bottom - winH;\n    var scrolls = hints.scrollHeight > hints.clientHeight + 1\n    var startScroll = cm.getScrollInfo();\n\n    if (overlapY > 0) {\n      var height = box.bottom - box.top, curTop = pos.top - (pos.bottom - box.top);\n      if (curTop - height > 0) { // Fits above cursor\n        hints.style.top = (top = pos.top - height - offsetTop) + \"px\";\n        below = false;\n      } else if (height > winH) {\n        hints.style.height = (winH - 5) + \"px\";\n        hints.style.top = (top = pos.bottom - box.top - offsetTop) + \"px\";\n        var cursor = cm.getCursor();\n        if (data.from.ch != cursor.ch) {\n          pos = cm.cursorCoords(cursor);\n          hints.style.left = (left = pos.left - offsetLeft) + \"px\";\n          box = hints.getBoundingClientRect();\n        }\n      }\n    }\n    var overlapX = box.right - winW;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + \"px\";\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = pos.left - overlapX - offsetLeft) + \"px\";\n    }\n    if (scrolls) for (var node = hints.firstChild; node; node = node.nextSibling)\n      node.style.paddingRight = cm.display.nativeBarWidth + \"px\"\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus: function(n, avoidWrap) { widget.changeActive(widget.selectedHint + n, avoidWrap); },\n      setFocus: function(n) { widget.changeActive(n); },\n      menuSize: function() { return widget.screenAmount(); },\n      length: completions.length,\n      close: function() { completion.close(); },\n      pick: function() { widget.pick(); },\n      data: data\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      var closingOnBlur;\n      cm.on(\"blur\", this.onBlur = function() { closingOnBlur = setTimeout(function() { completion.close(); }, 100); });\n      cm.on(\"focus\", this.onFocus = function() { clearTimeout(closingOnBlur); });\n    }\n\n    cm.on(\"scroll\", this.onScroll = function() {\n      var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\n      var newTop = top + startScroll.top - curScroll.top;\n      var point = newTop - (parentWindow.pageYOffset || (ownerDocument.documentElement || ownerDocument.body).scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + \"px\";\n      hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\n    });\n\n    CodeMirror.on(hints, \"dblclick\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {widget.changeActive(t.hintId); widget.pick();}\n    });\n\n    CodeMirror.on(hints, \"click\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, \"mousedown\", function() {\n      setTimeout(function(){cm.focus();}, 20);\n    });\n\n    CodeMirror.signal(data, \"select\", completions[this.selectedHint], hints.childNodes[this.selectedHint]);\n    return true;\n  }\n\n  Widget.prototype = {\n    close: function() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n\n      var cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off(\"blur\", this.onBlur);\n        cm.off(\"focus\", this.onFocus);\n      }\n      cm.off(\"scroll\", this.onScroll);\n    },\n\n    disable: function() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var widget = this;\n      this.keyMap = {Enter: function() { widget.picked = true; }};\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick: function() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive: function(i, avoidWrap) {\n      if (i >= this.data.list.length)\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      else if (i < 0)\n        i = avoidWrap ? 0  : this.data.list.length - 1;\n      if (this.selectedHint == i) return;\n      var node = this.hints.childNodes[this.selectedHint];\n      if (node) node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\n      if (node.offsetTop < this.hints.scrollTop)\n        this.hints.scrollTop = node.offsetTop - 3;\n      else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\n        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;\n      CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\n    },\n\n    screenAmount: function() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    }\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers\n    var result = []\n    for (var i = 0; i < helpers.length; i++)\n      if (helpers[i].supportsSelection) result.push(helpers[i])\n    return result\n  }\n\n  function fetchHints(hint, cm, options, callback) {\n    if (hint.async) {\n      hint(cm, callback, options)\n    } else {\n      var result = hint(cm, options)\n      if (result && result.then) result.then(callback)\n      else callback(result)\n    }\n  }\n\n  function resolveAutoHints(cm, pos) {\n    var helpers = cm.getHelpers(pos, \"hint\"), words\n    if (helpers.length) {\n      var resolved = function(cm, callback, options) {\n        var app = applicableHelpers(cm, helpers);\n        function run(i) {\n          if (i == app.length) return callback(null)\n          fetchHints(app[i], cm, options, function(result) {\n            if (result && result.list.length > 0) callback(result)\n            else run(i + 1)\n          })\n        }\n        run(0)\n      }\n      resolved.async = true\n      resolved.supportsSelection = true\n      return resolved\n    } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\n      return function(cm) { return CodeMirror.hint.fromList(cm, {words: words}) }\n    } else if (CodeMirror.hint.anyword) {\n      return function(cm, options) { return CodeMirror.hint.anyword(cm, options) }\n    } else {\n      return function() {}\n    }\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"auto\", {\n    resolve: resolveAutoHints\n  });\n\n  CodeMirror.registerHelper(\"hint\", \"fromList\", function(cm, options) {\n    var cur = cm.getCursor(), token = cm.getTokenAt(cur)\n    var term, from = CodeMirror.Pos(cur.line, token.start), to = cur\n    if (token.start < cur.ch && /\\w/.test(token.string.charAt(cur.ch - token.start - 1))) {\n      term = token.string.substr(0, cur.ch - token.start)\n    } else {\n      term = \"\"\n      from = cur\n    }\n    var found = [];\n    for (var i = 0; i < options.words.length; i++) {\n      var word = options.words[i];\n      if (word.slice(0, term.length) == term)\n        found.push(word);\n    }\n\n    if (found.length) return {list: found, from: from, to: to};\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnUnfocus: true,\n    completeOnSingleClick: true,\n    container: null,\n    customKeys: null,\n    extraKeys: null\n  };\n\n  CodeMirror.defineOption(\"hintOptions\", null);\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"./codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"./codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineSimpleMode = function(name, states) {\n    CodeMirror.defineMode(name, function(config) {\n      return CodeMirror.simpleMode(config, states);\n    });\n  };\n\n  CodeMirror.simpleMode = function(config, states) {\n    ensureState(states, \"start\");\n    var states_ = {}, meta = states.meta || {}, hasIndentation = false;\n    for (var state in states) if (state != meta && states.hasOwnProperty(state)) {\n      var list = states_[state] = [], orig = states[state];\n      for (var i = 0; i < orig.length; i++) {\n        var data = orig[i];\n        list.push(new Rule(data, states));\n        if (data.indent || data.dedent) hasIndentation = true;\n      }\n    }\n    var mode = {\n      startState: function() {\n        return {state: \"start\", pending: null,\n                local: null, localState: null,\n                indent: hasIndentation ? [] : null};\n      },\n      copyState: function(state) {\n        var s = {state: state.state, pending: state.pending,\n                 local: state.local, localState: null,\n                 indent: state.indent && state.indent.slice(0)};\n        if (state.localState)\n          s.localState = CodeMirror.copyState(state.local.mode, state.localState);\n        if (state.stack)\n          s.stack = state.stack.slice(0);\n        for (var pers = state.persistentStates; pers; pers = pers.next)\n          s.persistentStates = {mode: pers.mode,\n                                spec: pers.spec,\n                                state: pers.state == state.localState ? s.localState : CodeMirror.copyState(pers.mode, pers.state),\n                                next: s.persistentStates};\n        return s;\n      },\n      token: tokenFunction(states_, config),\n      innerMode: function(state) { return state.local && {mode: state.local.mode, state: state.localState}; },\n      indent: indentFunction(states_, meta)\n    };\n    if (meta) for (var prop in meta) if (meta.hasOwnProperty(prop))\n      mode[prop] = meta[prop];\n    return mode;\n  };\n\n  function ensureState(states, name) {\n    if (!states.hasOwnProperty(name))\n      throw new Error(\"Undefined state \" + name + \" in simple mode\");\n  }\n\n  function toRegex(val, caret) {\n    if (!val) return /(?:)/;\n    var flags = \"\";\n    if (val instanceof RegExp) {\n      if (val.ignoreCase) flags = \"i\";\n      val = val.source;\n    } else {\n      val = String(val);\n    }\n    return new RegExp((caret === false ? \"\" : \"^\") + \"(?:\" + val + \")\", flags);\n  }\n\n  function asToken(val) {\n    if (!val) return null;\n    if (val.apply) return val\n    if (typeof val == \"string\") return val.replace(/\\./g, \" \");\n    var result = [];\n    for (var i = 0; i < val.length; i++)\n      result.push(val[i] && val[i].replace(/\\./g, \" \"));\n    return result;\n  }\n\n  function Rule(data, states) {\n    if (data.next || data.push) ensureState(states, data.next || data.push);\n    this.regex = toRegex(data.regex);\n    this.token = asToken(data.token);\n    this.data = data;\n  }\n\n  function tokenFunction(states, config) {\n    return function(stream, state) {\n      if (state.pending) {\n        var pend = state.pending.shift();\n        if (state.pending.length == 0) state.pending = null;\n        stream.pos += pend.text.length;\n        return pend.token;\n      }\n\n      if (state.local) {\n        if (state.local.end && stream.match(state.local.end)) {\n          var tok = state.local.endToken || null;\n          state.local = state.localState = null;\n          return tok;\n        } else {\n          var tok = state.local.mode.token(stream, state.localState), m;\n          if (state.local.endScan && (m = state.local.endScan.exec(stream.current())))\n            stream.pos = stream.start + m.index;\n          return tok;\n        }\n      }\n\n      var curState = states[state.state];\n      for (var i = 0; i < curState.length; i++) {\n        var rule = curState[i];\n        var matches = (!rule.data.sol || stream.sol()) && stream.match(rule.regex);\n        if (matches) {\n          if (rule.data.next) {\n            state.state = rule.data.next;\n          } else if (rule.data.push) {\n            (state.stack || (state.stack = [])).push(state.state);\n            state.state = rule.data.push;\n          } else if (rule.data.pop && state.stack && state.stack.length) {\n            state.state = state.stack.pop();\n          }\n\n          if (rule.data.mode)\n            enterLocalMode(config, state, rule.data.mode, rule.token);\n          if (rule.data.indent)\n            state.indent.push(stream.indentation() + config.indentUnit);\n          if (rule.data.dedent)\n            state.indent.pop();\n          var token = rule.token\n          if (token && token.apply) token = token(matches)\n          if (matches.length > 2 && rule.token && typeof rule.token != \"string\") {\n            state.pending = [];\n            for (var j = 2; j < matches.length; j++)\n              if (matches[j])\n                state.pending.push({text: matches[j], token: rule.token[j - 1]});\n            stream.backUp(matches[0].length - (matches[1] ? matches[1].length : 0));\n            return token[0];\n          } else if (token && token.join) {\n            return token[0];\n          } else {\n            return token;\n          }\n        }\n      }\n      stream.next();\n      return null;\n    };\n  }\n\n  function cmp(a, b) {\n    if (a === b) return true;\n    if (!a || typeof a != \"object\" || !b || typeof b != \"object\") return false;\n    var props = 0;\n    for (var prop in a) if (a.hasOwnProperty(prop)) {\n      if (!b.hasOwnProperty(prop) || !cmp(a[prop], b[prop])) return false;\n      props++;\n    }\n    for (var prop in b) if (b.hasOwnProperty(prop)) props--;\n    return props == 0;\n  }\n\n  function enterLocalMode(config, state, spec, token) {\n    var pers;\n    if (spec.persistent) for (var p = state.persistentStates; p && !pers; p = p.next)\n      if (spec.spec ? cmp(spec.spec, p.spec) : spec.mode == p.mode) pers = p;\n    var mode = pers ? pers.mode : spec.mode || CodeMirror.getMode(config, spec.spec);\n    var lState = pers ? pers.state : CodeMirror.startState(mode);\n    if (spec.persistent && !pers)\n      state.persistentStates = {mode: mode, spec: spec.spec, state: lState, next: state.persistentStates};\n\n    state.localState = lState;\n    state.local = {mode: mode,\n                   end: spec.end && toRegex(spec.end),\n                   endScan: spec.end && spec.forceEnd !== false && toRegex(spec.end, false),\n                   endToken: token && token.join ? token[token.length - 1] : token};\n  }\n\n  function indexOf(val, arr) {\n    for (var i = 0; i < arr.length; i++) if (arr[i] === val) return true;\n  }\n\n  function indentFunction(states, meta) {\n    return function(state, textAfter, line) {\n      if (state.local && state.local.mode.indent)\n        return state.local.mode.indent(state.localState, textAfter, line);\n      if (state.indent == null || state.local || meta.dontIndentStates && indexOf(state.state, meta.dontIndentStates) > -1)\n        return CodeMirror.Pass;\n\n      var pos = state.indent.length - 1, rules = states[state.state];\n      scan: for (;;) {\n        for (var i = 0; i < rules.length; i++) {\n          var rule = rules[i];\n          if (rule.data.dedent && rule.data.dedentIfLineStart !== false) {\n            var m = rule.regex.exec(textAfter);\n            if (m && m[0]) {\n              pos--;\n              if (rule.next || rule.push) rules = states[rule.next || rule.push];\n              textAfter = textAfter.slice(m[0].length);\n              continue scan;\n            }\n          }\n        }\n        break;\n      }\n      return pos < 0 ? 0 : state.indent[pos];\n    };\n  }\n});\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./codemirror.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./codemirror.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./codemirror.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* BASICS */\\n\\n.CodeMirror {\\n  /* Set height, width, borders, and global font properties here */\\n  font-family: monospace;\\n  height: 300px;\\n  color: black;\\n  direction: ltr;\\n}\\n\\n/* PADDING */\\n\\n.CodeMirror-lines {\\n  padding: 4px 0; /* Vertical padding around content */\\n}\\n.CodeMirror pre {\\n  padding: 0 4px; /* Horizontal padding of content */\\n}\\n\\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\n  background-color: white; /* The little square between H and V scrollbars */\\n}\\n\\n/* GUTTER */\\n\\n.CodeMirror-gutters {\\n  border-right: 1px solid #ddd;\\n  background-color: #f7f7f7;\\n  white-space: nowrap;\\n}\\n.CodeMirror-linenumbers {}\\n.CodeMirror-linenumber {\\n  padding: 0 3px 0 5px;\\n  min-width: 20px;\\n  text-align: right;\\n  color: #999;\\n  white-space: nowrap;\\n}\\n\\n.CodeMirror-guttermarker { color: black; }\\n.CodeMirror-guttermarker-subtle { color: #999; }\\n\\n/* CURSOR */\\n\\n.CodeMirror-cursor {\\n  border-left: 1px solid black;\\n  border-right: none;\\n  width: 0;\\n}\\n/* Shown when moving in bi-directional text */\\n.CodeMirror div.CodeMirror-secondarycursor {\\n  border-left: 1px solid silver;\\n}\\n.cm-fat-cursor .CodeMirror-cursor {\\n  width: auto;\\n  border: 0 !important;\\n  background: #7e7;\\n}\\n.cm-fat-cursor div.CodeMirror-cursors {\\n  z-index: 1;\\n}\\n.cm-fat-cursor-mark {\\n  background-color: rgba(20, 255, 20, 0.5);\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  -moz-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n}\\n.cm-animate-fat-cursor {\\n  width: auto;\\n  border: 0;\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  -moz-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n  background-color: #7e7;\\n}\\n@-moz-keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n@-webkit-keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n@keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n\\n/* Can style cursor different in overwrite (non-insert) mode */\\n.CodeMirror-overwrite .CodeMirror-cursor {}\\n\\n.cm-tab { display: inline-block; text-decoration: inherit; }\\n\\n.CodeMirror-rulers {\\n  position: absolute;\\n  left: 0; right: 0; top: -50px; bottom: -20px;\\n  overflow: hidden;\\n}\\n.CodeMirror-ruler {\\n  border-left: 1px solid #ccc;\\n  top: 0; bottom: 0;\\n  position: absolute;\\n}\\n\\n/* DEFAULT THEME */\\n\\n.cm-s-default .cm-header {color: blue;}\\n.cm-s-default .cm-quote {color: #090;}\\n.cm-negative {color: #d44;}\\n.cm-positive {color: #292;}\\n.cm-header, .cm-strong {font-weight: bold;}\\n.cm-em {font-style: italic;}\\n.cm-link {text-decoration: underline;}\\n.cm-strikethrough {text-decoration: line-through;}\\n\\n.cm-s-default .cm-keyword {color: #708;}\\n.cm-s-default .cm-atom {color: #219;}\\n.cm-s-default .cm-number {color: #164;}\\n.cm-s-default .cm-def {color: #00f;}\\n.cm-s-default .cm-variable,\\n.cm-s-default .cm-punctuation,\\n.cm-s-default .cm-property,\\n.cm-s-default .cm-operator {}\\n.cm-s-default .cm-variable-2 {color: #05a;}\\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\\n.cm-s-default .cm-comment {color: #a50;}\\n.cm-s-default .cm-string {color: #a11;}\\n.cm-s-default .cm-string-2 {color: #f50;}\\n.cm-s-default .cm-meta {color: #555;}\\n.cm-s-default .cm-qualifier {color: #555;}\\n.cm-s-default .cm-builtin {color: #30a;}\\n.cm-s-default .cm-bracket {color: #997;}\\n.cm-s-default .cm-tag {color: #170;}\\n.cm-s-default .cm-attribute {color: #00c;}\\n.cm-s-default .cm-hr {color: #999;}\\n.cm-s-default .cm-link {color: #00c;}\\n\\n.cm-s-default .cm-error {color: #f00;}\\n.cm-invalidchar {color: #f00;}\\n\\n.CodeMirror-composing { border-bottom: 2px solid; }\\n\\n/* Default styles for common addons */\\n\\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\\n.CodeMirror-activeline-background {background: #e8f2ff;}\\n\\n/* STOP */\\n\\n/* The rest of this file contains styles related to the mechanics of\\n   the editor. You probably shouldn't touch them. */\\n\\n.CodeMirror {\\n  position: relative;\\n  overflow: hidden;\\n  background: white;\\n}\\n\\n.CodeMirror-scroll {\\n  overflow: scroll !important; /* Things will break if this is overridden */\\n  /* 30px is the magic margin used to hide the element's real scrollbars */\\n  /* See overflow: hidden in .CodeMirror */\\n  margin-bottom: -30px; margin-right: -30px;\\n  padding-bottom: 30px;\\n  height: 100%;\\n  outline: none; /* Prevent dragging from highlighting the element */\\n  position: relative;\\n}\\n.CodeMirror-sizer {\\n  position: relative;\\n  border-right: 30px solid transparent;\\n}\\n\\n/* The fake, visible scrollbars. Used to force redraw during scrolling\\n   before actual scrolling happens, thus preventing shaking and\\n   flickering artifacts. */\\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\n  position: absolute;\\n  z-index: 6;\\n  display: none;\\n}\\n.CodeMirror-vscrollbar {\\n  right: 0; top: 0;\\n  overflow-x: hidden;\\n  overflow-y: scroll;\\n}\\n.CodeMirror-hscrollbar {\\n  bottom: 0; left: 0;\\n  overflow-y: hidden;\\n  overflow-x: scroll;\\n}\\n.CodeMirror-scrollbar-filler {\\n  right: 0; bottom: 0;\\n}\\n.CodeMirror-gutter-filler {\\n  left: 0; bottom: 0;\\n}\\n\\n.CodeMirror-gutters {\\n  position: absolute; left: 0; top: 0;\\n  min-height: 100%;\\n  z-index: 3;\\n}\\n.CodeMirror-gutter {\\n  white-space: normal;\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  margin-bottom: -30px;\\n}\\n.CodeMirror-gutter-wrapper {\\n  position: absolute;\\n  z-index: 4;\\n  background: none !important;\\n  border: none !important;\\n}\\n.CodeMirror-gutter-background {\\n  position: absolute;\\n  top: 0; bottom: 0;\\n  z-index: 4;\\n}\\n.CodeMirror-gutter-elt {\\n  position: absolute;\\n  cursor: default;\\n  z-index: 4;\\n}\\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n\\n.CodeMirror-lines {\\n  cursor: text;\\n  min-height: 1px; /* prevents collapsing before first draw */\\n}\\n.CodeMirror pre {\\n  /* Reset some styles that the rest of the page might have set */\\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\\n  border-width: 0;\\n  background: transparent;\\n  font-family: inherit;\\n  font-size: inherit;\\n  margin: 0;\\n  white-space: pre;\\n  word-wrap: normal;\\n  line-height: inherit;\\n  color: inherit;\\n  z-index: 2;\\n  position: relative;\\n  overflow: visible;\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-font-variant-ligatures: contextual;\\n  font-variant-ligatures: contextual;\\n}\\n.CodeMirror-wrap pre {\\n  word-wrap: break-word;\\n  white-space: pre-wrap;\\n  word-break: normal;\\n}\\n\\n.CodeMirror-linebackground {\\n  position: absolute;\\n  left: 0; right: 0; top: 0; bottom: 0;\\n  z-index: 0;\\n}\\n\\n.CodeMirror-linewidget {\\n  position: relative;\\n  z-index: 2;\\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\\n}\\n\\n.CodeMirror-widget {}\\n\\n.CodeMirror-rtl pre { direction: rtl; }\\n\\n.CodeMirror-code {\\n  outline: none;\\n}\\n\\n/* Force content-box sizing for the elements where we expect it */\\n.CodeMirror-scroll,\\n.CodeMirror-sizer,\\n.CodeMirror-gutter,\\n.CodeMirror-gutters,\\n.CodeMirror-linenumber {\\n  -moz-box-sizing: content-box;\\n  box-sizing: content-box;\\n}\\n\\n.CodeMirror-measure {\\n  position: absolute;\\n  width: 100%;\\n  height: 0;\\n  overflow: hidden;\\n  visibility: hidden;\\n}\\n\\n.CodeMirror-cursor {\\n  position: absolute;\\n  pointer-events: none;\\n}\\n.CodeMirror-measure pre { position: static; }\\n\\ndiv.CodeMirror-cursors {\\n  visibility: hidden;\\n  position: relative;\\n  z-index: 3;\\n}\\ndiv.CodeMirror-dragcursors {\\n  visibility: visible;\\n}\\n\\n.CodeMirror-focused div.CodeMirror-cursors {\\n  visibility: visible;\\n}\\n\\n.CodeMirror-selected { background: #d9d9d9; }\\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\\n.CodeMirror-crosshair { cursor: crosshair; }\\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n\\n.cm-searching {\\n  background-color: #ffa;\\n  background-color: rgba(255, 255, 0, .4);\\n}\\n\\n/* Used to force a border model for a node */\\n.cm-force-border { padding-right: .1px; }\\n\\n@media print {\\n  /* Hide the cursor when printing */\\n  .CodeMirror div.CodeMirror-cursors {\\n    visibility: hidden;\\n  }\\n}\\n\\n/* See issue #2901 */\\n.cm-tab-wrap-hack:after { content: ''; }\\n\\n/* Help users use markselection to safely style text background */\\nspan.CodeMirror-selectedtext { background: none; }\\n\", \"\"]);\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./show-hint.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./show-hint.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./show-hint.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".CodeMirror-hints {\\n  position: absolute;\\n  z-index: 10;\\n  overflow: hidden;\\n  list-style: none;\\n\\n  margin: 0;\\n  padding: 2px;\\n\\n  -webkit-box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n  -moz-box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n  box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\n  border-radius: 3px;\\n  border: 1px solid silver;\\n\\n  background: white;\\n  font-size: 90%;\\n  font-family: monospace;\\n\\n  max-height: 20em;\\n  overflow-y: auto;\\n}\\n\\n.CodeMirror-hint {\\n  margin: 0;\\n  padding: 0 4px;\\n  border-radius: 2px;\\n  white-space: pre;\\n  color: black;\\n  cursor: pointer;\\n}\\n\\nli.CodeMirror-hint-active {\\n  background: #08f;\\n  color: white;\\n}\\n\", \"\"]);\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./docs.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./docs.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./docs.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* @font-face {\\n  font-family: 'Source Sans Pro';\\n  font-style: normal;\\n  font-weight: 400;\\n  src: local('Source Sans Pro'), local('SourceSansPro-Regular'), url(//themes.googleusercontent.com/static/fonts/sourcesanspro/v5/ODelI1aHBYDBqgeIAH2zlBM0YzuT7MdOe03otPbuUS0.woff) format('woff');\\n} */\\n\\nbody, html { margin: 0; padding: 0; height: 100%; }\\nsection, article { display: block; padding: 0; }\\n\\nbody {\\n  background: #f8f8f8;\\n  font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;\\n  line-height: 1.5;\\n}\\n\\np { margin-top: 0; }\\n\\nh2, h3, h1 {\\n  font-weight: normal;\\n  margin-bottom: .7em;\\n}\\nh1 { font-size: 140%; }\\nh2 { font-size: 120%; }\\nh3 { font-size: 110%; }\\narticle > h2:first-child, section:first-child > h2 { margin-top: 0; }\\n\\n#nav h1 {\\n  margin-right: 12px;\\n  margin-top: 0;\\n  margin-bottom: 2px;\\n  color: #d30707;\\n  letter-spacing: .5px;\\n}\\n\\na, a:visited, a:link, .quasilink {\\n  color: #A21313;\\n}\\n\\nem {\\n  padding-right: 2px;\\n}\\n\\n.quasilink {\\n  cursor: pointer;\\n}\\n\\narticle {\\n  max-width: 700px;\\n  margin: 0 0 0 160px;\\n  border-left: 2px solid #E30808;\\n  border-right: 1px solid #ddd;\\n  padding: 30px 50px 100px 50px;\\n  background: white;\\n  z-index: 2;\\n  position: relative;\\n  min-height: 100%;\\n  box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n}\\n\\n#nav {\\n  position: fixed;\\n  padding-top: 30px;\\n  max-height: 100%;\\n  box-sizing: -moz-border-box;\\n  box-sizing: border-box;\\n  overflow-y: auto;\\n  left: 0; right: none;\\n  width: 160px;\\n  text-align: right;\\n  z-index: 1;\\n}\\n\\n@media screen and (min-width: 1000px) {\\n  article {\\n    margin: 0 auto;\\n  }\\n  #nav {\\n    right: 50%;\\n    width: auto;\\n    border-right: 349px solid transparent;\\n  }\\n}\\n\\n#nav ul {\\n  display: block;\\n  margin: 0; padding: 0;\\n  margin-bottom: 32px;\\n}\\n\\n#nav a {\\n  text-decoration: none;\\n}\\n\\n#nav li {\\n  display: block;\\n  margin-bottom: 4px;\\n}\\n\\n#nav li ul {\\n  font-size: 80%;\\n  margin-bottom: 0;\\n  display: none;\\n}\\n\\n#nav li.active ul {\\n  display: block;\\n}\\n\\n#nav li li a {\\n  padding-right: 20px;\\n  display: inline-block;\\n}\\n\\n#nav ul a {\\n  color: black;\\n  padding: 0 7px 1px 11px;\\n}\\n\\n#nav ul a.active, #nav ul a:hover {\\n  border-bottom: 1px solid #E30808;\\n  margin-bottom: -1px;\\n  color: #E30808;\\n}\\n\\n#logo {\\n  border: 0;\\n  margin-right: 12px;\\n  margin-bottom: 25px;\\n}\\n\\nsection {\\n  border-top: 1px solid #E30808;\\n  margin: 1.5em 0;\\n}\\n\\nsection.first {\\n  border: none;\\n  margin-top: 0;\\n}\\n\\n#demo {\\n  position: relative;\\n}\\n\\n#demolist {\\n  position: absolute;\\n  right: 5px;\\n  top: 5px;\\n  z-index: 25;\\n}\\n\\n.yinyang {\\n  position: absolute;\\n  top: -10px;\\n  left: 0; right: 0;\\n  margin: auto;\\n  display: block;\\n  height: 120px;\\n}\\n\\n.actions {\\n  margin: 1em 0 0;\\n  min-height: 100px;\\n  position: relative;\\n}\\n\\n.actionspicture {\\n  pointer-events: none;\\n  position: absolute;\\n  height: 100px;\\n  top: 0; left: 0; right: 0;\\n}\\n\\n.actionlink {\\n  pointer-events: auto;\\n  font-family: arial;\\n  font-size: 80%;\\n  font-weight: bold;\\n  position: absolute;\\n  top: 0; bottom: 0;\\n  line-height: 1;\\n  height: 1em;\\n  margin: auto;\\n}\\n\\n.actionlink.download {\\n  color: white;\\n  right: 50%;\\n  margin-right: 13px;\\n  text-shadow: -1px 1px 3px #b00, -1px -1px 3px #b00, 1px 0px 3px #b00;\\n}\\n\\n.actionlink.fund {\\n  color: #b00;\\n  left: 50%;\\n  margin-left: 15px;\\n}\\n\\n.actionlink:hover {\\n  text-decoration: underline;\\n}\\n\\n.actionlink a {\\n  color: inherit;\\n}\\n\\n.actionsleft {\\n  float: left;\\n}\\n\\n.actionsright {\\n  float: right;\\n  text-align: right;\\n}\\n\\n@media screen and (max-width: 800px) {\\n  .actions {\\n    padding-top: 120px;\\n  }\\n  .actionsleft, .actionsright {\\n    float: none;\\n    text-align: left;\\n    margin-bottom: 1em;\\n  }\\n}\\n\\nth {\\n  text-decoration: underline;\\n  font-weight: normal;\\n  text-align: left;\\n}\\n\\n#features ul {\\n  list-style: none;\\n  margin: 0 0 1em;\\n  padding: 0 0 0 1.2em;\\n}\\n\\n#features li:before {\\n  content: \\\"-\\\";\\n  width: 1em;\\n  display: inline-block;\\n  padding: 0;\\n  margin: 0;\\n  margin-left: -1em;\\n}\\n\\n.rel {\\n  margin-bottom: 0;\\n}\\n.rel-note {\\n  margin-top: 0;\\n  color: #555;\\n}\\n\\npre {\\n  padding-left: 15px;\\n  border-left: 2px solid #ddd;\\n}\\n\\ncode {\\n  padding: 0 2px;\\n}\\n\\nstrong {\\n  text-decoration: underline;\\n  font-weight: normal;\\n}\\n\\n.field {\\n  border: 1px solid #A21313;\\n}\\n\", \"\"]);\n","//----------------------------------------------------------------------\n//\n// ECMAScript 2015 Polyfills\n//\n//----------------------------------------------------------------------\n\n(function (global) {\n  \"use strict\";\n\n  // Set this to always override native implementations, for testing\n  // the polyfill in browsers with partial/full ES2015 support.\n  var OVERRIDE_NATIVE_FOR_TESTING = false;\n\n  var undefined = (void 0); // Paranoia\n\n  // Helpers\n\n  function strict(o) {\n    return o === global ? undefined : o;\n  }\n\n  function isSymbol(s) {\n    return (typeof s === 'symbol') || ('Symbol' in global && s instanceof global.Symbol);\n  }\n\n  function getPropertyDescriptor(target, name) {\n    var desc = Object.getOwnPropertyDescriptor(target, name);\n    var proto = Object.getPrototypeOf(target);\n    while (!desc && proto) {\n      desc = Object.getOwnPropertyDescriptor(proto, name);\n      proto = Object.getPrototypeOf(proto);\n    }\n    return desc;\n  }\n\n  var enqueue = (function(nativePromise, nativeSetImmediate) {\n    if (nativePromise)\n      return function(job) { nativePromise.resolve().then(function() { job(); }); };\n    if (nativeSetImmediate)\n      return function(job) { nativeSetImmediate(job); };\n    return function(job) { setTimeout(job, 0); };\n  }(global['Promise'], global['setImmediate']));\n\n  function define(o, p, v, override) {\n    if (p in o && !override && !OVERRIDE_NATIVE_FOR_TESTING)\n      return;\n\n    if (typeof v === 'function') {\n      // Sanity check that functions are appropriately named (where possible)\n      console.assert(isSymbol(p) || !('name' in v) || v.name === p || v.name === p + '_', 'Expected function name \"' + p.toString() + '\", was \"' + v.name + '\"');\n      Object.defineProperty(o, p, {\n        value: v,\n        configurable: true,\n        enumerable: false,\n        writable: true\n      });\n    } else {\n      Object.defineProperty(o, p, {\n        value: v,\n        configurable: false,\n        enumerable: false,\n        writable: false\n      });\n    }\n  }\n\n  function set_internal(o, p, v) {\n    Object.defineProperty(o, p, {\n      value: v,\n      configurable: false,\n      enumerable: false,\n      writable: true\n    });\n  }\n\n  // Snapshot intrinsic functions\n  var $isNaN = global.isNaN,\n      $parseInt = global.parseInt,\n      $parseFloat = global.parseFloat;\n\n  var E = Math.E,\n      LOG10E = Math.LOG10E,\n      LOG2E = Math.LOG2E,\n      abs = Math.abs,\n      ceil = Math.ceil,\n      exp = Math.exp,\n      floor = Math.floor,\n      log = Math.log,\n      max = Math.max,\n      min = Math.min,\n      pow = Math.pow,\n      random = Math.random,\n      sqrt = Math.sqrt;\n\n  var orig_match = String.prototype.match,\n      orig_replace = String.prototype.replace,\n      orig_search = String.prototype.search,\n      orig_split = String.prototype.split;\n\n  // These are used for implementing the polyfills, but not exported.\n\n  // Inspired by https://gist.github.com/1638059\n  /** @constructor */\n  function EphemeronTable() {\n    var secretKey = ObjectCreate(null);\n\n    function conceal(o) {\n      var oValueOf = o.valueOf, secrets = ObjectCreate(null);\n      Object.defineProperty(o, 'valueOf', {\n          value: (function(secretKey) {\n            return function (k) {\n              return (k === secretKey) ? secrets : oValueOf.apply(o, arguments);\n            };\n          }(secretKey)),\n        configurable: true,\n        writeable: true,\n        enumerable: false\n        });\n      return secrets;\n    }\n\n    function reveal(o) {\n      var v = typeof o.valueOf === 'function' && o.valueOf(secretKey);\n      return v === o ? null : v;\n    }\n\n    return {\n      clear: function() {\n        secretKey = ObjectCreate(null);\n      },\n      remove: function(key) {\n        var secrets = reveal(key);\n        if (secrets && HasOwnProperty(secrets, 'value')) {\n          delete secrets.value;\n          return true;\n        }\n        return false;\n      },\n      get: function(key, defaultValue) {\n        var secrets = reveal(key);\n        return (secrets && HasOwnProperty(secrets, 'value')) ? secrets.value : defaultValue;\n      },\n      has: function(key) {\n        var secrets = reveal(key);\n        return Boolean(secrets && HasOwnProperty(secrets, 'value'));\n      },\n      set: function(key, value) {\n        var secrets = reveal(key) || conceal(key);\n        secrets.value = value;\n      }\n    };\n  }\n\n  var empty = Object.create(null);\n\n  //----------------------------------------------------------------------\n  //\n  // ECMAScript 2015\n  // http://www.ecma-international.org/ecma-262/6.0/\n  //\n  //----------------------------------------------------------------------\n\n  // ---------------------------------------\n  // 19.4 Symbol Objects\n  // ---------------------------------------\n\n  // NOTE: Symbols are defined here - out of spec order - since we need the\n  // properties and prototype to be populated for other polyfills.\n\n  // NOTE: Not secure, nor is obj[$$symbol] hidden from Object.keys()\n\n  var symbolForKey;\n  (function() {\n    var secret = Object.create(null);\n    var symbolMap = {};\n    symbolForKey = function(k) {\n      return symbolMap[k];\n    };\n\n    var GlobalSymbolRegistry = [];\n\n    function unique(bits) {\n      return Array(bits + 1).join('x').replace(/x/g, function() {\n        return random() < 0.5 ? '\\u200C' : '\\u200D'; // JWNJ / ZWJ\n      });\n    }\n\n    // 19.4.1 The Symbol Constructor\n    // 19.4.1.1 Symbol ( description=undefined )\n    function Symbol(description) {\n      if (!(this instanceof Symbol)) return new Symbol(description, secret);\n      if (this instanceof Symbol && arguments[1] !== secret) throw TypeError();\n\n      var descString = description === undefined ? undefined : String(description);\n\n      set_internal(this, '[[SymbolData]]', unique(128));\n      set_internal(this, '[[Description]]', descString);\n\n      symbolMap[this] = this;\n      return this;\n    }\n\n    if (!('Symbol' in global) || OVERRIDE_NATIVE_FOR_TESTING)\n      global.Symbol = Symbol;\n\n    // 19.4.2 Properties of the Symbol Constructor\n\n    // 19.4.2.1 Symbol.for (key)\n    define(Symbol, 'for', function for_(key) {\n      var stringKey = String(key);\n      for (var i = 0; i < GlobalSymbolRegistry.length; ++i) {\n        var e = GlobalSymbolRegistry[i];\n        if (SameValue(e['[[key]]'], stringKey)) return e['[[symbol]]'];\n      }\n      var newSymbol = Symbol(key);\n      GlobalSymbolRegistry.push({'[[key]]': stringKey, '[[symbol]]': newSymbol});\n      return newSymbol;\n    });\n\n    // 19.4.2.2 Symbol.hasInstance\n    // 19.4.2.3 Symbol.isConcatSpreadable\n\n    // 19.4.2.4 Symbol.iterator\n    define(global.Symbol, 'iterator', global.Symbol('Symbol.iterator'));\n\n    // 19.4.2.5 Symbol.keyFor (sym)\n    define(Symbol, 'keyFor', function keyFor(sym) {\n      if (!(sym instanceof Symbol)) throw TypeError();\n      for (var i = 0; i < GlobalSymbolRegistry.length; ++i) {\n        var e = GlobalSymbolRegistry[i];\n        if (SameValue(e['[[symbol]]'], sym)) return e['[[key]]'];\n      }\n      return undefined;\n    });\n\n    // 19.4.2.6 Symbol.match\n    define(global.Symbol, 'match', global.Symbol('Symbol.match'));\n\n    // 19.4.2.7 Symbol.prototype\n\n    // 19.4.2.8 Symbol.replace\n    define(global.Symbol, 'replace', global.Symbol('Symbol.replace'));\n\n    // 19.4.2.9 Symbol.search\n    define(global.Symbol, 'search', global.Symbol('Symbol.search'));\n\n    // 19.4.2.10 Symbol.species\n\n    // 19.4.2.11 Symbol.search\n    define(global.Symbol, 'split', global.Symbol('Symbol.split'));\n\n    // 19.4.2.12 Symbol.toPrimitive\n\n    // 19.4.2.13 Symbol.toStringTag\n    define(global.Symbol, 'toStringTag', global.Symbol('Symbol.toStringTag'));\n\n    // 19.4.2.14 Symbol.unscopables\n\n    // 19.4.3 Properties of the Symbol Prototype Object\n    // 19.4.3.1 Symbol.prototype.constructor\n\n    // 19.4.3.2 Symbol.prototype.toString ( )\n    Object.defineProperty(Symbol.prototype, 'toString', {\n      value: function toString() {\n        var s = strict(this);\n        var desc = s['[[Description]]'];\n        return 'Symbol(' + (desc === undefined ? '' : desc) + s['[[SymbolData]]'] + ')';\n      },\n      configurable: true, writeable: true, enumerable: false });\n\n    // 19.4.3.3 Symbol.prototype.valueOf ( )\n    Object.defineProperty(Symbol.prototype, 'valueOf', {\n      value: function valueOf() {\n        // To prevent automatic string conversion:\n        throw TypeError();\n\n        // Spec has approximately the following:\n        //var s = strict(this);\n        //if (Type(s) === 'symbol') return s;\n        //if (Type(s) !== 'object') throw TypeError();\n        //if (!('[[SymbolData]]' in s)) throw TypeError();\n        //return s['[[SymbolData]]'];\n      },\n      configurable: true, writeable: true, enumerable: false });\n\n    // 19.4.3.4 Symbol.prototype [ @@toStringTag ]\n    // (Done later to polyfill partial implementations)\n\n    // 19.4.4 Properties of Symbol Instances\n  }());\n\n  console.assert(typeof global.Symbol() === 'symbol' || symbolForKey(String(global.Symbol('x'))) !== undefined);\n\n  // Defined here so that other prototypes can reference it\n  // 25.1.2 The %IteratorPrototype% Object\n  var $IteratorPrototype$ = {};\n\n  //----------------------------------------\n  // 6 ECMAScript Data Types and Values\n  //----------------------------------------\n\n  // 6.1 ECMAScript Language Types\n\n  // \"Type(x)\" is used as shorthand for \"the type of x\"...\n  function Type(v) {\n    switch (typeof v) {\n    case 'undefined': return 'undefined';\n    case 'boolean': return 'boolean';\n    case 'number': return 'number';\n    case 'string': return 'string';\n    case 'symbol': return 'symbol';\n    default:\n      if (v === null) return 'null';\n      if (v instanceof global.Symbol) return 'symbol';\n      return 'object';\n    }\n  }\n\n  // 6.1.5.1 Well-Known Symbols\n  var $$iterator = global.Symbol.iterator,\n      $$match = global.Symbol.match,\n      $$replace = global.Symbol.replace,\n      $$search = global.Symbol.search,\n      $$split = global.Symbol.split,\n      $$toStringTag = global.Symbol.toStringTag;\n\n  //----------------------------------------\n  // 7 Abstract Operations\n  //----------------------------------------\n\n  //----------------------------------------\n  // 7.1 Type Conversion\n  //----------------------------------------\n\n  // 7.1.1 ToPrimitive ( input [, PreferredType] )\n  // just use valueOf()\n\n  // 7.1.2 ToBoolean ( argument )\n  // just use Boolean()\n\n  // 7.1.3 ToNumber ( argument )\n  // just use Number()\n\n  // 7.1.4 ToInteger ( argument )\n  function ToInteger(n) {\n    n = Number(n);\n    if ($isNaN(n)) return 0;\n    if (n === 0 || n === Infinity || n === -Infinity) return n;\n    return ((n < 0) ? -1 : 1) * floor(abs(n));\n  }\n\n  // 7.1.5 ToInt32 ( argument )\n  function ToInt32(v) { return v >> 0; }\n\n  // 7.1.6 ToUint32 ( argument )\n  function ToUint32(v) { return v >>> 0; }\n\n  // 7.1.7 ToInt16 ( argument )\n  function ToInt16(v) { return (v << 16) >> 16; }\n\n  // 7.1.8 ToUint16 ( argument )\n  function ToUint16(v) { return v & 0xFFFF; }\n\n  // 7.1.9 ToInt8 ( argument )\n  function ToInt8(v) { return (v << 24) >> 24; }\n\n  // 7.1.10 ToUint8 ( argument )\n  function ToUint8(v) { return v & 0xFF; }\n\n  // 7.1.11 ToUint8Clamp ( argument )\n  function ToUint8Clamp(argument) {\n    var number = Number(argument);\n    if ($isNaN(number)) return 0;\n    if (number <= 0) return 0;\n    if (number >= 255) return 255;\n    var f = floor(number);\n    if ((f + 0.5) < number) return f + 1;\n    if (number < (f + 0.5)) return f;\n    if (f % 2) return f + 1;\n    return f;\n  }\n\n  // 7.1.12 ToString ( argument )\n  // just use String()\n\n  // 7.1.13 ToObject ( argument )\n  function ToObject(v) {\n    if (v === null || v === undefined) throw TypeError();\n    return Object(v);\n  }\n\n  // 7.1.14 ToPropertyKey ( argument )\n  function ToPropertyKey(v) {\n    return String(v);\n  }\n\n  // 7.1.15 ToLength ( argument )\n  function ToLength(v) {\n    var len = ToInteger(v);\n    if (len <= 0) return 0;\n    if (len === Infinity) return 0x20000000000000 - 1; // 2^53-1\n    return min(len, 0x20000000000000 - 1); // 2^53-1\n  }\n\n  // 7.1.16 CanonicalNumericIndexString ( argument )\n\n  //----------------------------------------\n  // 7.2 Testing and Comparison Operations\n  //----------------------------------------\n\n  // 7.2.1 RequireObjectCoercible ( argument )\n  // 7.2.2 IsArray ( argument )\n\n  // 7.2.3 IsCallable ( argument )\n  function IsCallable(o) { return typeof o === 'function'; }\n\n  // 7.2.4 IsConstructor ( argument )\n  function IsConstructor(o) {\n    // Hacks for Safari 7 TypedArray XXXConstructor objects\n    if (/Constructor/.test(Object.prototype.toString.call(o))) return true;\n    if (/Function/.test(Object.prototype.toString.call(o))) return true;\n    // TODO: Can this be improved on?\n    return typeof o === 'function';\n  }\n\n  // 7.2.5 IsExtensible (O)\n  // 7.2.6 IsInteger ( argument )\n\n  // 7.2.7 IsPropertyKey ( argument )\n  function IsPropertyKey(argument) {\n    if (Type(argument) === 'string') return true;\n    if (Type(argument) === 'symbol') return true;\n    return false;\n  }\n\n  // 7.2.8 IsRegExp ( argument )\n\n  // 7.2.9 SameValue(x, y)\n  function SameValue(x, y) {\n    if (typeof x !== typeof y) return false;\n    switch (typeof x) {\n    case 'undefined':\n      return true;\n    case 'number':\n      if (x !== x && y !== y) return true;\n      if (x === 0 && y === 0) return 1/x === 1/y;\n      return x === y;\n    case 'boolean':\n    case 'string':\n    case 'object':\n    default:\n      return x === y;\n    }\n  }\n\n  // 7.2.10 SameValueZero(x, y)\n  function SameValueZero(x, y) {\n    if (typeof x !== typeof y) return false;\n    switch (typeof x) {\n    case 'undefined':\n      return true;\n    case 'number':\n      if (x !== x && y !== y) return true;\n      return x === y;\n    case 'boolean':\n    case 'string':\n    case 'object':\n    default:\n      return x === y;\n    }\n  }\n\n  //----------------------------------------\n  // 7.3 Operations on Objects\n  //----------------------------------------\n\n  // 7.3.1 Get (O, P)\n  // - just use o.p or o[p]\n\n  // 7.3.2 GetV (V, P)\n  function GetV(v, p) {\n    var o = ToObject(v);\n    return o[p];\n  }\n\n  // 7.3.3 Set (O, P, V, Throw)\n  // - just use o.p = v or o[p] = v\n\n\n\n\n  // 7.3.9 GetMethod (O, P)\n  function GetMethod(o, p) {\n    var func = GetV(o, p);\n    if (func === undefined || func === null) return undefined;\n    if (!IsCallable(func)) throw TypeError();\n    return func;\n  }\n\n  // 7.3.10 HasProperty (O, P)\n  function HasProperty(o, p) {\n    while (o) {\n      if (Object.prototype.hasOwnProperty.call(o, p)) return true;\n      if (Type(o) !== 'object') return false;\n      var op = Object.getPrototypeOf(o);\n      if (op === o) return false; // IE8 has self-referential prototypes\n      o = op;\n    }\n    return false;\n  }\n\n  // 7.3.11 HasOwnProperty (O, P)\n  function HasOwnProperty(o, p) {\n    return Object.prototype.hasOwnProperty.call(o, p);\n  }\n\n  //----------------------------------------\n  // 7.4 Operations on Iterator Objects\n  //----------------------------------------\n\n  // 7.4.1 GetIterator ( obj, method )\n  function GetIterator(obj, method) {\n    if (arguments.length < 2)\n      method = GetMethod(obj, $$iterator);\n    var iterator = method.call(obj);\n    if (Type(iterator) !== 'object') throw TypeError();\n    return iterator;\n  }\n\n  // 7.4.2 IteratorNext ( iterator, value )\n  function IteratorNext(iterator, value) {\n    if (arguments.length < 2)\n      var result = iterator.next();\n    else\n      result = iterator.next(value);\n    if (Type(result) !== 'object') throw TypeError();\n    return result;\n  }\n\n  // 7.4.3 IteratorComplete ( iterResult )\n  function IteratorComplete(iterResult) {\n    console.assert(Type(iterResult) === 'object');\n    return Boolean(iterResult.done);\n  }\n\n  // 7.4.4 IteratorValue ( iterResult )\n  function IteratorValue(iterResult) {\n    console.assert(Type(iterResult) === 'object');\n    return iterResult.value;\n  }\n\n  // 7.4.5 IteratorStep ( iterator )\n  function IteratorStep( iterator, value ) {\n    var result = IteratorNext(iterator, value);\n    var done = result['done'];\n    if (Boolean(done) === true) return false;\n    return result;\n  }\n\n  // 7.4.6 IteratorClose( iterator, completion )\n  function IteratorClose( iterator, completion ) {\n    console.assert(Type(iterator) === 'object');\n    var _return = GetMethod(iterator, 'return');\n    if (_return === undefined) return completion;\n    try {\n      var innerResult = _return[iterator]();\n    } catch (result) {\n      // TODO: If completion.[[type]] is throw, return completion\n      return result;\n    }\n    if (Type(innerResult) !== 'object') throw TypeError();\n    return completion;\n  }\n\n  // 7.4.7 CreateIterResultObject (value, done)\n  function CreateIterResultObject(value, done) {\n    console.assert(Type(done) === 'boolean');\n    var obj = {};\n    obj[\"value\"] = value;\n    obj[\"done\"] = done;\n    return obj;\n  }\n\n  // 7.4.8 CreateListIterator (list)\n  // 7.4.8.1 ListIterator next( )\n\n  //----------------------------------------\n  // 8 Executable Code and Execution Contexts\n  //----------------------------------------\n\n  //----------------------------------------\n  // 8.4 Jobs and Job Queues\n  //----------------------------------------\n\n  // 8.4.1 EnqueueJob ( queueName, job, arguments)\n  function EnqueueJob(queueName, job, args) {\n    var fn = function() { job.apply(undefined, args); };\n    enqueue(fn);\n  }\n\n  // 8.4.2 NextJob result\n  function NextJob(result) {\n    // no-op\n  }\n\n  //----------------------------------------\n  // 9 Ordinary and Exotic Objects Behaviors\n  //----------------------------------------\n\n  // 9.1.11 [[Enumerate]] ()\n  function Enumerate(obj) {\n    var e = [];\n    if (Object(obj) !== obj) return e;\n    var visited = new Set;\n    while (obj !== null) {\n      Object.getOwnPropertyNames(obj).forEach(function(name) {\n        if (!visited.has(name)) {\n          var desc = Object.getOwnPropertyDescriptor(obj, name);\n          if (desc) {\n            visited.add(name);\n            if (desc.enumerable) e.push(name);\n          }\n        }\n      });\n      obj = Object.getPrototypeOf(obj);\n    }\n    return e[$$iterator]();\n  }\n\n  // 9.1.12 [[OwnPropertyKeys]] ( )\n  function OwnPropertyKeys(o) {\n    return Object.getOwnPropertyNames(o);\n  }\n\n  // 9.1.13 ObjectCreate(proto, internalSlotsList)\n  function ObjectCreate(proto, internalSlotsList) {\n    return Object.create(proto, internalSlotsList);\n  }\n\n  // ---------------------------------------\n  // 19 Fundamental Objects\n  // ---------------------------------------\n\n  // ---------------------------------------\n  // 19.1 Object Objects\n  // ---------------------------------------\n\n  // 19.1.1 The Object Constructor\n  // 19.1.1.1 Object ( [ value ] )\n  // 19.1.2 Properties of the Object Constructor\n  // 19.1.2.1 Object.assign ( target, ...sources )\n  define(\n    Object, 'assign',\n    function assign(target, /*...*/sources) {\n      var to = ToObject(target);\n      if (arguments.length < 2) return to;\n\n      var sourcesIndex = 1;\n      while (sourcesIndex < arguments.length) {\n        var nextSource = arguments[sourcesIndex++];\n        if (nextSource === undefined || nextSource === null) {\n          var keys = [];\n        } else {\n          var from = ToObject(nextSource);\n          keys = OwnPropertyKeys(from);\n        }\n        for (var keysIndex = 0; keysIndex < keys.length; ++keysIndex) {\n          var nextKey = keys[keysIndex];\n          var desc = Object.getOwnPropertyDescriptor(from, nextKey);\n          if (desc !== undefined && desc.enumerable) {\n            var propValue = from[nextKey];\n            to[nextKey] = propValue;\n          }\n        }\n      }\n      return to;\n    });\n\n  // 19.1.2.2 Object.create ( O [ , Properties ] )\n  // 19.1.2.3 Object.defineProperties ( O, Properties )\n  // 19.1.2.4 Object.defineProperty ( O, P, Attributes )\n  // 19.1.2.5 Object.freeze ( O )\n  // 19.1.2.6 Object.getOwnPropertyDescriptor ( O, P )\n\n  (function() {\n    var nativeSymbols = (typeof global.Symbol() === 'symbol'),\n        $getOwnPropertyNames = Object.getOwnPropertyNames,\n        $keys = Object.keys,\n        $window_names = (typeof window === 'object' ? $getOwnPropertyNames(window) : []);\n\n    function isStringKey(k) { return !symbolForKey(k); }\n\n    // 19.1.2.7 Object.getOwnPropertyNames ( O )\n    define(\n      Object, 'getOwnPropertyNames',\n      function getOwnPropertyNames(o) {\n        if (Object.prototype.toString.call(o) === '[object Window]') {\n          // Workaround for cross-realm calling by IE itself.\n          // https://github.com/inexorabletash/polyfill/issues/96\n          try {\n            return $getOwnPropertyNames(o).filter(isStringKey);\n          } catch (_) {\n            return $window_names.slice();\n          }\n        }\n        return $getOwnPropertyNames(o).filter(isStringKey);\n      }, !nativeSymbols);\n\n    // 19.1.2.8 Object.getOwnPropertySymbols ( O )\n    define(\n      Object, 'getOwnPropertySymbols',\n      function getOwnPropertySymbols(o) {\n        return $getOwnPropertyNames(o).filter(symbolForKey).map(symbolForKey);\n      }, !nativeSymbols);\n\n    // 19.1.2.14 Object.keys ( O )\n    define(\n      Object, 'keys',\n      function keys(o) {\n        return $keys(o).filter(isStringKey);\n      }, !nativeSymbols);\n  }());\n\n  // 19.1.2.9 Object.getPrototypeOf ( O )\n  // 19.1.2.10 Object.is ( value1, value2 )\n  define(\n    Object, 'is',\n    function is(value1, value2) {\n      return SameValue(value1, value2);\n    });\n\n  // 19.1.2.11 Object.isExtensible ( O )\n  // 19.1.2.12 Object.isFrozen ( O )\n  // 19.1.2.13 Object.isSealed ( O )\n\n  // 19.1.2.14 Object.keys ( O )\n  // see above\n\n  // 19.1.2.15 Object.preventExtensions ( O )\n  // 19.1.2.16 Object.prototype\n  // 19.1.2.17 Object.seal ( O )\n\n  // 19.1.2.18 Object.setPrototypeOf ( O, proto )\n  define(\n    Object, 'setPrototypeOf',\n    function setPrototypeOf(o, proto) {\n      if (Type(o) !== 'object') throw TypeError();\n      if (Type(proto) !== 'object' && Type(proto) !== 'null') throw TypeError();\n      o.__proto__ = proto;\n      return o;\n    }\n  );\n\n  // 19.1.3 Properties of the Object Prototype Object\n  // 19.1.3.1 Object.prototype.constructor\n  // 19.1.3.2 Object.prototype.hasOwnProperty ( V )\n  // 19.1.3.3 Object.prototype.isPrototypeOf ( V )\n  // 19.1.3.4 Object.prototype.propertyIsEnumerable ( V )\n  // 19.1.3.5 Object.prototype.toLocaleString ( [ reserved1 [ , reserved2 ] ] )\n  // 19.1.3.6 Object.prototype.toString ( )\n  var o_p_ts = Object.prototype.toString;\n  define(Object.prototype, 'toString',\n       function() {\n         var o = strict(this);\n         if (o === Object(o) && $$toStringTag in o) {\n           return '[object ' + o[$$toStringTag] + ']';\n         }\n         return o_p_ts.apply(o, arguments);\n       });\n\n  // 19.1.3.7 Object.prototype.valueOf ( )\n  // 19.1.4 Properties of Object Instances\n\n  // ---------------------------------------\n  // 19.2 Function Objects\n  // ---------------------------------------\n\n  // 19.2.1 The Function Constructor\n  // 19.2.1.1 Function ( p1, p2,  , pn, body )\n  // 19.2.2 Properties of the Function Constructor\n  // 19.2.2.1 Function.length\n  // 19.2.2.2 Function.prototype\n  // 19.2.3 Properties of the Function Prototype Object\n  // 19.2.3.1 Function.prototype.apply ( thisArg, argArray )\n  // 19.2.3.2 Function.prototype.bind ( thisArg , ...args)\n  // 19.2.3.3 Function.prototype.call (thisArg , ...args)\n  // 19.2.3.4 Function.prototype.constructor\n  // 19.2.3.5 Function.prototype.toString ( )\n  // 19.2.3.6 Function.prototype[@@hasInstance] ( V )\n  // 19.2.4 Function Instances\n  // 19.2.4.1 length\n  // 19.2.4.2 name\n  // 19.2.4.3 prototype\n\n  // (No polyfillable changes from ES5)\n\n  // ---------------------------------------\n  // 19.3 Boolean Objects\n  // ---------------------------------------\n\n  // 19.3.1 The Boolean Constructor\n  // 19.3.1.1 Boolean ( value )\n  // 19.3.2 Properties of the Boolean Constructor\n  // 19.3.2.1 Boolean.prototype\n  // 19.3.3 Properties of the Boolean Prototype Object\n  // 19.3.3.1 Boolean.prototype.constructor\n  // 19.3.3.2 Boolean.prototype.toString ( )\n  // 19.3.3.3 Boolean.prototype.valueOf ( )\n  // 19.3.4 Properties of Boolean Instances\n\n  // (No polyfillable changes from ES5)\n\n  // ---------------------------------------\n  // 19.4 Symbol Objects\n  // ---------------------------------------\n\n  // Moved earlier in this script, so that other polyfills can depend on them.\n\n  // 19.4.3.4 Symbol.prototype [ @@toStringTag ]\n  define(global.Symbol.prototype, global.Symbol.toStringTag, 'Symbol');\n\n  // ---------------------------------------\n  // 19.5 Error Objects\n  // ---------------------------------------\n\n  // 19.5.1 The Error Constructor\n  // 19.5.1.1 Error ( message )\n  // 19.5.1.2 new Error( ...argumentsList )\n  // 19.5.2 Properties of the Error Constructor\n  // 19.5.2.1 Error.prototype\n  // 19.5.3 Properties of the Error Prototype Object\n  // 19.5.3.1 Error.prototype.constructor\n  // 19.5.3.2 Error.prototype.message\n  // 19.5.3.3 Error.prototype.name\n  // 19.5.3.4 Error.prototype.toString ( )\n  // 19.5.4 Properties of Error Instances\n  // 19.5.5 Native Error Types Used in This Standard\n  // 19.5.5.1 EvalError\n  // 19.5.5.2 RangeError\n  // 19.5.5.3 ReferenceError\n  // 19.5.5.4 SyntaxError\n  // 19.5.5.5 TypeError\n  // 19.5.5.6 URIError\n  // 19.5.6 NativeError Object Structure\n  // 19.5.6.1 NativeError Constructors\n  // 19.5.6.1.1 NativeError ( message )\n  // 19.5.6.1.2 new NativeError ( ...argumentsList )\n  // 19.5.6.2 Properties of the NativeError Constructors\n  // 19.5.6.2.1 NativeError.prototype\n  // 19.5.6.3 Properties of the NativeError Prototype Objects\n  // 19.5.6.4 Properties of NativeError Instances\n\n  // (No polyfillable changes from ES5)\n\n  // ---------------------------------------\n  // 20 Numbers and Dates\n  // ---------------------------------------\n\n  // ---------------------------------------\n  // 20.1 Number Objects\n  // ---------------------------------------\n\n  // 20.1.1 The Number Constructor\n  // 20.1.1.1 Number ( [ value ] )\n  // 20.1.1.2 new Number ( ...argumentsList )\n  // 20.1.2 Properties of the Number Constructor\n\n  // 20.1.2.1 Number.EPSILON\n  define(\n    Number, 'EPSILON',\n    (function () {\n      var next, result;\n      for (next = 1; 1 + next !== 1; next = next / 2)\n        result = next;\n      return result;\n    }()));\n\n  // 20.1.2.2 Number.isFinite ( number )\n  define(\n    Number, 'isFinite',\n    function isFinite(number) {\n      if (Type(number) !== 'number') return false;\n      if (number !== number || number === +Infinity || number === -Infinity) return false;\n      return true;\n    });\n\n  // 20.1.2.3 Number.isInteger ( number )\n  define(\n    Number, 'isInteger',\n    function isInteger(number) {\n      if (Type(number) !== 'number') return false;\n      if (number !== number || number === +Infinity || number === -Infinity) return false;\n      var integer = ToInteger(number);\n      if (integer !== number) return false;\n      return true;\n    });\n\n  // 20.1.2.4 Number.isNaN ( number )\n  define(\n    Number, 'isNaN',\n    function isNaN(number) {\n      if (Type(number) !== 'number') return false;\n      if (number !== number) return true;\n      return false;\n    });\n\n  // 20.1.2.5 Number.isSafeInteger ( number )\n  define(\n    Number, 'isSafeInteger',\n    function isSafeInteger(number) {\n      if (Type(number) !== 'number') return false;\n      if (number !== number || number === +Infinity || number === -Infinity) return false;\n      var integer = ToInteger(number);\n      if (integer !== number) return false;\n      if (abs(integer) <= (0x20000000000000 - 1)) // 2^53-1\n        return true;\n      return false;\n    });\n\n  // 20.1.2.6 Number.MAX_SAFE_INTEGER\n  define(\n    Number, 'MAX_SAFE_INTEGER',\n    9007199254740991); // 2^53-1\n\n  // 20.1.2.7 Number.MAX_VALUE\n\n  // 20.1.2.8 Number.MIN_SAFE_INTEGER\n  define(\n    Number, 'MIN_SAFE_INTEGER',\n    -9007199254740991); // -2^53+1\n\n  // 20.1.2.9 Number.MIN_VALUE\n  // 20.1.2.10 Number.NaN\n  // 20.1.2.11 Number.NEGATIVE_INFINITY\n\n  // 20.1.2.12 Number.parseFloat ( string )\n  define(Number, 'parseFloat', $parseFloat);\n\n  // 20.1.2.13 Number.parseInt ( string, radix )\n  define(Number, 'parseInt', $parseInt);\n\n  // 20.1.2.14 Number.POSITIVE_INFINITY\n  // 20.1.2.15 Number.prototype\n\n  // 20.1.3 Properties of the Number Prototype Object\n  // 20.1.3.1 Number.prototype.constructor\n  // 20.1.3.2 Number.prototype.toExponential ( fractionDigits )\n  // 20.1.3.3 Number.prototype.toFixed ( fractionDigits )\n  // 20.1.3.4 Number.prototype.toLocaleString( [ reserved1 [ , reserved2 ] ])\n  // 20.1.3.5 Number.prototype.toPrecision ( precision )\n  // 20.1.3.6 Number.prototype.toString ( [ radix ] )\n  // 20.1.3.7 Number.prototype.valueOf ( )\n  // 20.1.4 Properties of Number Instances\n\n  // ---------------------------------------\n  // 20.2 The Math Object\n  // ---------------------------------------\n\n  // 20.2.1 Value Properties of the Math Object\n  // 20.2.1.1 Math.E\n  // 20.2.1.2 Math.LN10\n  // 20.2.1.3 Math.LN2\n  // 20.2.1.4 Math.LOG10E\n  // 20.2.1.5 Math.LOG2E\n  // 20.2.1.6 Math.PI\n  // 20.2.1.7 Math.SQRT1_2\n  // 20.2.1.8 Math.SQRT2\n\n  // 20.2.1.9 Math [ @@toStringTag ]\n  define(Math, $$toStringTag, 'Math');\n\n  // 20.2.2 Function Properties of the Math Object\n  // 20.2.2.1 Math.abs ( x )\n  // 20.2.2.2 Math.acos ( x )\n\n  // 20.2.2.3 Math.acosh(x)\n  define(\n    Math, 'acosh',\n    function acosh(x) {\n      x = Number(x);\n      return log(x + sqrt(x * x - 1));\n    });\n\n  // 20.2.2.4 Math.asin ( x )\n\n  // 20.2.2.5 Math.asinh( x )\n  define(\n    Math, 'asinh',\n    function asinh(x) {\n      x = Number(x);\n      if (SameValue(x, -0)) {\n        return x;\n      }\n      var s = sqrt(x * x + 1);\n      return (s === -x) ? log(0) : log(x + s);\n    });\n\n  // 20.2.2.6 Math.atan ( x )\n\n  // 20.2.2.7 Math.atanh( x )\n  define(\n    Math, 'atanh',\n    function atanh(x) {\n      x = Number(x);\n      return (x === 0) ? x : log((1 + x) / (1 - x)) / 2;\n    });\n\n  // 20.2.2.8 Math.atan2 ( y, x )\n\n  // 20.2.2.9 Math.cbrt ( x )\n  define(\n    Math, 'cbrt',\n    function cbrt(x) {\n      x = Number(x);\n      if ($isNaN(x/x)) {\n        return x;\n      }\n      var r = pow(abs(x), 1/3);\n      var t = x/r/r;\n      return r + (r * (t-r) / (2*r + t));\n    });\n\n  // 20.2.2.10 Math.ceil ( x )\n\n  // 20.2.2.11 Math.clz32 ( x )\n  define(\n    Math, 'clz32',\n    function clz32(x) {\n      function clz8(x) {\n        return (x & 0xf0) ? (x & 0x80 ? 0 : x & 0x40 ? 1 : x & 0x20 ? 2 : 3) :\n        (x & 0x08 ? 4 : x & 0x04 ? 5 : x & 0x02 ? 6 : x & 0x01 ? 7 : 8);\n      }\n      x = ToUint32(x);\n      return x & 0xff000000 ? clz8(x >> 24) :\n        x & 0xff0000 ? clz8(x >> 16) + 8 :\n        x & 0xff00 ? clz8(x >> 8) + 16 : clz8(x) + 24;\n    });\n\n\n\n  // 20.2.2.12 Math.cos ( x )\n\n  // 20.2.2.13 Math.cosh ( x )\n  define(\n    Math, 'cosh',\n    function cosh(x) {\n      x = Number(x);\n      return (pow(E, x) + pow(E, -x)) / 2;\n    });\n\n  // 20.2.2.14 Math.exp ( x )\n\n  // 20.2.2.15 Math.expm1 ( x )\n  define(\n    Math, 'expm1',\n    function expm1(x) {\n      x = Number(x);\n      // from: http://www.johndcook.com/cpp_log1p.html\n      if (SameValue(x, -0)) {\n        return -0;\n      } else if (abs(x) < 1e-5) {\n        return x + 0.5 * x * x; // two terms of Taylor expansion\n      } else {\n        return exp(x) - 1;\n      }\n    });\n\n  // 20.2.2.16 Math.floor ( x )\n\n  // 20.2.2.17 Math.fround ( x )\n  define(\n    Math, 'fround',\n    function fround(x) {\n      if ($isNaN(x)) {\n        return NaN;\n      }\n      if (1/x === +Infinity || 1/x === -Infinity || x === +Infinity || x === -Infinity) {\n        return x;\n      }\n      return (new Float32Array([x]))[0];\n    });\n\n  // 20.2.2.18 Math.hypot ( value1 [, value2 [ ... ] ] )\n  define(\n    Math, 'hypot',\n    function hypot() {\n      var values = [];\n      var m = 0, sawNaN = false;\n      for (var i = 0; i < arguments.length; ++i) {\n        var n = abs(Number(arguments[i]));\n        if (n === Infinity) return n;\n        if (n !== n) sawNaN = true;\n        if (n > m) m = n;\n        values[i] = n;\n      }\n      if (sawNaN) return NaN;\n      if (m === 0) return +0;\n      var sum = +0;\n      for (i = 0; i < values.length; ++i) {\n        var r = values[i] / m;\n        sum = sum + r * r;\n      }\n      return m * sqrt(sum);\n    });\n\n  // 20.2.2.19 Math.imul ( x, y )\n  define(\n    Math, 'imul',\n    function imul(x, y) {\n      var a = ToUint32(x);\n      var b = ToUint32(y);\n      // (slow but accurate)\n      var ah  = (a >>> 16) & 0xffff;\n      var al = a & 0xffff;\n      var bh  = (b >>> 16) & 0xffff;\n      var bl = b & 0xffff;\n      return ((al * bl) + (((ah * bl + al * bh) << 16) >>> 0)|0);\n    }, ('imul' in Math && Math.imul(1, 0x80000000) === 0) // Safari 7 bug\n  );\n\n  // 20.2.2.20 Math.log ( x )\n\n  // 20.2.2.21 Math.log1p ( x )\n  define(\n    Math, 'log1p',\n    function log1p(x) {\n      x = Number(x);\n      // from: http://www.johndcook.com/cpp_expm1.html\n      if (x < -1) {\n        return NaN;\n      } else if (SameValue(x, -0)) {\n        return -0;\n      } else if (abs(x) > 1e-4) {\n        return log(1 + x);\n      } else {\n        return (-0.5 * x + 1) * x;\n      }\n    });\n\n  // 20.2.2.22 Math.log10 ( x )\n  define(\n    Math, 'log10',\n    function log10(x) {\n      x = Number(x);\n      return log(x) * LOG10E;\n    });\n\n  // 20.2.2.23 Math.log2 ( x )\n  define(\n    Math, 'log2',\n    function log2(x) {\n      x = Number(x);\n      return log(x) * LOG2E;\n    });\n\n  // 20.2.2.24 Math.max ( value1, value2 , ...values )\n  // 20.2.2.25 Math.min ( value1, value2 , ...values )\n  // 20.2.2.26 Math.pow ( x, y )\n  // 20.2.2.27 Math.random ( )\n  // 20.2.2.28 Math.round ( x )\n\n  // 20.2.2.29 Math.sign(x)\n  define(\n    Math, 'sign',\n    function sign(x) {\n      x = Number(x);\n      return x < 0 ? -1 : x > 0 ? 1 : x;\n    });\n\n  // 20.2.2.30 Math.sin ( x )\n\n  // 20.2.2.31 Math.sinh( x )\n  define(\n    Math, 'sinh',\n    function sinh(x) {\n      x = Number(x);\n      return SameValue(x, -0) ? x : (pow(E, x) - pow(E, -x)) / 2;\n    });\n\n  // 20.2.2.32 Math.sqrt ( x )\n  // 20.2.2.33 Math.tan ( x )\n\n  // 20.2.2.34 Math.tanh ( x )\n  define(\n    Math, 'tanh',\n    function tanh(x) {\n      x = Number(x);\n      var n = pow(E, 2 * x) - 1,\n          d = pow(E, 2 * x) + 1;\n      if (SameValue(x, -0))\n        return x;\n      return (n === d) ? 1 : n / d; // Handle Infinity/Infinity\n    });\n\n  // 20.2.2.35 Math.trunc ( x )\n  define(\n    Math, 'trunc',\n    function trunc(x) {\n      x = Number(x);\n      return $isNaN(x) ? NaN :\n        x < 0 ? ceil(x) : floor(x);\n    });\n\n  // ---------------------------------------\n  // 20.3 Date Objects\n  // ---------------------------------------\n\n  // 20.3.1 Overview of Date Objects and Definitions of Abstract Operations\n  // 20.3.1.1 Time Values and Time Range\n  // 20.3.1.2 Day Number and Time within Day\n  // 20.3.1.3 Year Number\n  // 20.3.1.4 Month Number\n  // 20.3.1.5 Date Number\n  // 20.3.1.6 Week Day\n  // 20.3.1.7 Local Time Zone Adjustment\n  // 20.3.1.8 Daylight Saving Time Adjustment\n  // 20.3.1.9 Local Time\n  // 20.3.1.10 Hours, Minutes, Second, and Milliseconds\n  // 20.3.1.11 MakeTime (hour, min, sec, ms)\n  // 20.3.1.12 MakeDay (year, month, date)\n  // 20.3.1.13 MakeDate (day, time)\n  // 20.3.1.14 TimeClip (time)\n  // 20.3.1.15 Date Time String Format\n  // 20.3.1.15.1 Extended years\n  // 20.3.2 The Date Constructor\n  // 20.3.2.1 Date ( year, month [, date [ , hours [ , minutes [ , seconds [ , ms ] ] ] ] ] )\n  // 20.3.2.2 Date ( value )\n  // 20.3.2.3 Date ( )\n  // 20.3.3 Properties of the Date Constructor\n  // 20.3.3.1 Date.now ( )\n  // 20.3.3.2 Date.parse (string)\n  // 20.3.3.3 Date.prototype\n  // 20.3.3.4 Date.UTC ( year, month [ , date [ , hours [ , minutes [ , seconds [ , ms ] ] ] ] ] )\n  // 20.3.4 Properties of the Date Prototype Object\n  // 20.3.4.1 Date.prototype.constructor\n  // 20.3.4.2 Date.prototype.getDate ( )\n  // 20.3.4.3 Date.prototype.getDay ( )\n  // 20.3.4.4 Date.prototype.getFullYear ( )\n  // 20.3.4.5 Date.prototype.getHours ( )\n  // 20.3.4.6 Date.prototype.getMilliseconds ( )\n  // 20.3.4.7 Date.prototype.getMinutes ( )\n  // 20.3.4.8 Date.prototype.getMonth ( )\n  // 20.3.4.9 Date.prototype.getSeconds ( )\n  // 20.3.4.10 Date.prototype.getTime ( )\n  // 20.3.4.11 Date.prototype.getTimezoneOffset ( )\n  // 20.3.4.12 Date.prototype.getUTCDate ( )\n  // 20.3.4.13 Date.prototype.getUTCDay ( )\n  // 20.3.4.14 Date.prototype.getUTCFullYear ( )\n  // 20.3.4.15 Date.prototype.getUTCHours ( )\n  // 20.3.4.16 Date.prototype.getUTCMilliseconds ( )\n  // 20.3.4.17 Date.prototype.getUTCMinutes ( )\n  // 20.3.4.18 Date.prototype.getUTCMonth ( )\n  // 20.3.4.19 Date.prototype.getUTCSeconds ( )\n  // 20.3.4.20 Date.prototype.setDate ( date )\n  // 20.3.4.21 Date.prototype.setFullYear ( year [ , month [ , date ] ] )\n  // 20.3.4.22 Date.prototype.setHours ( hour [ , min [ , sec [ , ms ] ] ] )\n  // 20.3.4.23 Date.prototype.setMilliseconds ( ms )\n  // 20.3.4.24 Date.prototype.setMinutes ( min [ , sec [ , ms ] ] )\n  // 20.3.4.25 Date.prototype.setMonth ( month [ , date ] )\n  // 20.3.4.26 Date.prototype.setSeconds ( sec [ , ms ] )\n  // 20.3.4.27 Date.prototype.setTime ( time )\n  // 20.3.4.28 Date.prototype.setUTCDate ( date )\n  // 20.3.4.29 Date.prototype.setUTCFullYear ( year [ , month [ , date ] ] )\n  // 20.3.4.30 Date.prototype.setUTCHours ( hour [ , min [ , sec [ , ms ] ] ] )\n  // 20.3.4.31 Date.prototype.setUTCMilliseconds ( ms )\n  // 20.3.4.32 Date.prototype.setUTCMinutes ( min [ , sec [, ms ] ] )\n  // 20.3.4.33 Date.prototype.setUTCMonth ( month [ , date ] )\n  // 20.3.4.34 Date.prototype.setUTCSeconds ( sec [ , ms ] )\n  // 20.3.4.35 Date.prototype.toDateString ( )\n  // 20.3.4.36 Date.prototype.toISOString ( )\n  // 20.3.4.37 Date.prototype.toJSON ( key )\n  // 20.3.4.38 Date.prototype.toLocaleDateString ( [ reserved1 [ , reserved2 ] ] )\n  // 20.3.4.39 Date.prototype.toLocaleString ( [ reserved1 [ , reserved2 ] ] )\n  // 20.3.4.40 Date.prototype.toLocaleTimeString ( [ reserved1 [ , reserved2 ] ] )\n  // 20.3.4.41 Date.prototype.toString ( )\n  // 20.3.4.42 Date.prototype.toTimeString ( )\n  // 20.3.4.43 Date.prototype.toUTCString ( )\n  // 20.3.4.44 Date.prototype.valueOf ( )\n  // 20.3.4.45 Date.prototype [ @@toPrimitive ] ( hint )\n  // 20.3.5 Properties of Date Instances\n\n  // (No polyfillable changes from ES5)\n\n  // ---------------------------------------\n  // 21 Text Processing\n  // ---------------------------------------\n\n  var string_regexp_dispatch = (function() {\n    var faux = {}, secret = Symbol();\n    faux[Symbol.match] = function() { return secret; };\n    return (\"\").match(faux) === secret;\n  }());\n\n  // 21.1 String Objects\n  // 21.1.1 The String Constructor\n  // 21.1.1.1 String ( value )\n  // 21.1.2 Properties of the String Constructor\n  // 21.1.2.1 String.fromCharCode ( ...codeUnits )\n\n  // 21.1.2.2 String.fromCodePoint ( ...codePoints )\n  define(\n    String, 'fromCodePoint',\n    function fromCodePoint(/*...codePoints*/) {\n      var codePoints = arguments,\n          length = codePoints.length,\n          elements = [],\n          nextIndex = 0;\n      while (nextIndex < length) {\n        var next = codePoints[nextIndex];\n        var nextCP = Number(next);\n        if (!SameValue(nextCP, ToInteger(nextCP)) ||\n            nextCP < 0 || nextCP > 0x10FFFF) {\n          throw RangeError('Invalid code point ' + nextCP);\n        }\n        if (nextCP < 0x10000) {\n          elements.push(String.fromCharCode(nextCP));\n        } else {\n          nextCP -= 0x10000;\n          elements.push(String.fromCharCode((nextCP >> 10) + 0xD800));\n          elements.push(String.fromCharCode((nextCP % 0x400) + 0xDC00));\n        }\n        nextIndex += 1;\n      }\n      return elements.join('');\n    });\n\n  // 21.1.2.3 String.prototype\n\n  // 21.1.2.4 String.raw ( template , ...substitutions )\n  define(\n    String, 'raw',\n    function raw(template /*, ...substitutions*/) {\n      var substitutions = [].slice.call(arguments, 1);\n\n      var cooked = Object(template);\n      var rawValue = cooked['raw'];\n      var raw = Object(rawValue);\n      var len = raw['length'];\n      var literalSegments = ToLength(len);\n      if (literalSegments <= 0) return '';\n      var stringElements = [];\n      var nextIndex = 0;\n      while (true) {\n        var next = raw[nextIndex];\n        var nextSeg = String(next);\n        stringElements.push(nextSeg);\n        if (nextIndex + 1 === literalSegments)\n          return stringElements.join('');\n        next = substitutions[nextIndex];\n        var nextSub = String(next);\n        stringElements.push(nextSub);\n        nextIndex = nextIndex + 1;\n      }\n    });\n\n  // See https://githib.com/inexorabletash/uate for a more useful version.\n\n  // 21.1.3 Properties of the String Prototype Object\n  // 21.1.3.1 String.prototype.charAt ( pos )\n  // 21.1.3.2 String.prototype.charCodeAt ( pos )\n\n  // 21.1.3.3 String.prototype.codePointAt ( pos )\n  define(\n    String.prototype, 'codePointAt',\n    function codePointAt(pos) {\n      var o = strict(this);\n      var s = String(o);\n      var position = ToInteger(pos);\n      var size = s.length;\n      if (position < 0 || position >= size) return undefined;\n      var first = s.charCodeAt(position);\n      if (first < 0xD800 || first > 0xDBFF || position + 1 === size) return first;\n      var second = s.charCodeAt(position + 1);\n      if (second < 0xDC00 || second > 0xDFFF) return first;\n      return ((first - 0xD800) * 1024) + (second - 0xDC00) + 0x10000;\n    });\n\n  // 21.1.3.4 String.prototype.concat ( ...args )\n  // 21.1.3.5 String.prototype.constructor\n\n  // 21.1.3.6 String.prototype.endsWith ( searchString [ , endPosition] )\n  define(\n    String.prototype, 'endsWith',\n    function endsWith(searchString) {\n      var endPosition = arguments[1];\n\n      var o = strict(this);\n      var s = String(o);\n      var searchStr = String(searchString);\n      var len = s.length;\n      var pos = (endPosition === undefined) ? len : ToInteger(endPosition);\n      var end = min(max(pos, 0), len);\n      var searchLength = searchStr.length;\n      var start = end - searchLength;\n      if (start < 0) return false;\n      if (s.substring(start, start + searchLength) === searchStr) return true;\n      return false;\n    });\n\n  // 21.1.3.7 String.prototype.includes ( searchString [ , position ] )\n  define(\n    String.prototype, 'includes',\n    function includes(searchString) {\n      var position = arguments[1];\n\n      var o = strict(this);\n      var s = String(o);\n      var searchStr = String(searchString);\n      var pos = ToInteger(position);\n      var len = s.length;\n      var start = min(max(pos, 0), len);\n      return s.indexOf(searchStr, start) !== -1;\n    });\n\n  // 21.1.3.8 String.prototype.indexOf ( searchString [ , position ] )\n  // 21.1.3.9 String.prototype.lastIndexOf ( searchString [ , position ] )\n  // 21.1.3.10 String.prototype.localeCompare ( that [, reserved1 [ , reserved2 ] ] )\n  // 21.1.3.11 String.prototype.match ( regexp )\n  define(\n    String.prototype, 'match',\n    function match(regexp) {\n      var o = strict(this);\n      var s = String(o);\n      if (HasProperty(regexp, $$match)) var rx = regexp;\n      else rx = new RegExp(regexp);\n      return rx[$$match](s);\n    }, !string_regexp_dispatch);\n\n  // 21.1.3.12 String.prototype.normalize ( [ form ] )\n\n  // Not practical due to table sizes; if needed, pull in:\n  // https://github.com/walling/unorm/\n\n  // 21.1.3.13 String.prototype.repeat ( count )\n  define(\n    String.prototype, 'repeat',\n    function repeat(count) {\n      var o = strict(this);\n      var s = String(o);\n      var n = ToInteger(count);\n      if (n < 0) throw RangeError();\n      if (n === Infinity) throw RangeError();\n      var t = new Array(n + 1).join(s);\n      return t;\n    });\n\n  // 21.1.3.14 String.prototype.replace (searchValue, replaceValue )\n  define(\n    String.prototype, 'replace',\n    function replace(searchValue, replaceValue) {\n      var o = strict(this);\n      if (HasProperty(searchValue, $$replace))\n        return searchValue[$$replace](o, replaceValue);\n      return orig_replace.call(o, searchValue, replaceValue);\n    }, !string_regexp_dispatch);\n\n  // 21.1.3.15 String.prototype.search ( regexp )\n  define(\n    String.prototype, 'search',\n    function search(regexp) {\n      var o = strict(this);\n      var string = String(o);\n      if (HasProperty(regexp, $$search)) var rx = regexp;\n      else rx = new RegExp(regexp);\n      return rx[$$search](string);\n    }, !string_regexp_dispatch);\n\n  // 21.1.3.16 String.prototype.slice ( start, end )\n  // 21.1.3.17 String.prototype.split ( separator, limit )\n  define(\n    String.prototype, 'split',\n    function split(separator, limit) {\n      var o = strict(this);\n      if (HasProperty(separator, $$split))\n        return separator[$$split](o, limit);\n      return orig_split.call(o, separator, limit);\n    }, !string_regexp_dispatch);\n\n  // 21.1.3.18 String.prototype.startsWith ( searchString [, position ] )\n  define(\n    String.prototype, 'startsWith',\n    function startsWith(searchString) {\n      var position = arguments[1];\n\n      var o = strict(this);\n      var s = String(o);\n      var searchStr = String(searchString);\n      var pos = ToInteger(position);\n      var len = s.length;\n      var start = min(max(pos, 0), len);\n      var searchLength = searchStr.length;\n      if (searchLength + start > len) return false;\n      if (s.substring(start, start + searchLength) === searchStr) return true;\n      return false;\n    });\n\n  // 21.1.3.19 String.prototype.substring ( start, end )\n  // 21.1.3.20 String.prototype.toLocaleLowerCase ( [ reserved1 [ , reserved2 ] ] )\n  // 21.1.3.21 String.prototype.toLocaleUpperCase ([ reserved1 [ , reserved2 ] ] )\n  // 21.1.3.22 String.prototype.toLowerCase ( )\n  // 21.1.3.23 String.prototype.toString ( )\n  // 21.1.3.24 String.prototype.toUpperCase ( )\n  // 21.1.3.25 String.prototype.trim ( )\n  // 21.1.3.26 String.prototype.valueOf ( )\n\n  // 21.1.3.27 String.prototype [ @@iterator ]( )\n  define(\n    String.prototype, $$iterator,\n    function entries() {\n      return CreateStringIterator(this, 'value');\n    });\n\n  // 21.1.4 Properties of String Instances\n  // 21.1.4.1 length\n\n  // 21.1.5 String Iterator Objects\n  /** @constructor */\n  function StringIterator() {}\n\n  // 21.1.5.1 CreateStringIterator Abstract Operation\n  function CreateStringIterator(string, kind) {\n    var s = String(string);\n    var iterator = new StringIterator;\n    set_internal(iterator, '[[IteratedString]]', s);\n    set_internal(iterator, '[[StringIteratorNextIndex]]', 0);\n    set_internal(iterator, '[[StringIterationKind]]', kind);\n    return iterator;\n  }\n\n  // 21.1.5.2 The %StringIteratorPrototype% Object\n  var $StringIteratorPrototype$ = Object.create($IteratorPrototype$);\n  StringIterator.prototype = $StringIteratorPrototype$;\n\n  // 21.1.5.2.1 %StringIteratorPrototype%.next ( )\n  define(\n    $StringIteratorPrototype$, 'next',\n    function next() {\n      var o = ToObject(this);\n      var s = String(o['[[IteratedString]]']),\n          index = o['[[StringIteratorNextIndex]]'],\n          len = s.length;\n      if (index >= len) {\n        set_internal(o, '[[StringIteratorNextIndex]]', Infinity);\n        return CreateIterResultObject(undefined, true);\n      }\n      var cp = s.codePointAt(index);\n      set_internal(o, '[[StringIteratorNextIndex]]', index + (cp > 0xFFFF ? 2 : 1));\n      return CreateIterResultObject(String.fromCodePoint(cp), false);\n    });\n\n  // 21.1.5.2.2 %StringIteratorPrototype% [ @@toStringTag ]\n  define($StringIteratorPrototype$, $$toStringTag, 'String Iterator');\n\n  // 21.1.5.3 Properties of String Iterator Instances\n\n  // ---------------------------------------\n  // 21.2 RegExp (Regular Expression) Objects\n  // ---------------------------------------\n\n  // 21.2.1 Patterns\n  // 21.2.2 Pattern Semantics\n  // 21.2.2.1 Notation\n  // 21.2.2.2 Pattern\n  // 21.2.2.3 Disjunction\n  // 21.2.2.4 Alternative\n  // 21.2.2.5 Term\n  // 21.2.2.6 Assertion\n  // 21.2.2.7 Quantifier\n  // 21.2.2.8 Atom\n  // 21.2.2.9 AtomEscape\n  // 21.2.2.10 CharacterEscape\n  // 21.2.2.11 DecimalEscape\n  // 21.2.2.12 CharacterClassEscape\n  // 21.2.2.13 CharacterClass\n  // 21.2.2.14 ClassRanges\n  // 21.2.2.15 NonemptyClassRanges\n  // 21.2.2.16 NonemptyClassRangesNoDash\n  // 21.2.2.17 ClassAtom\n  // 21.2.2.18 ClassAtomNoDash\n  // 21.2.2.19 ClassEscape\n  // 21.2.3 The RegExp Constructor\n  // 21.2.3.1 RegExp ( pattern, flags )\n  // 21.2.3.2 new RegExp( ...argumentsList )\n  // 21.2.3.3 Abstract Operations for the RegExp Constructor\n  // 21.2.4 Properties of the RegExp Constructor\n  // 21.2.4.1 RegExp.prototype\n  // 21.2.5 Properties of the RegExp Prototype Object\n  // 21.2.5.1 RegExp.prototype.constructor\n  // 21.2.5.2 RegExp.prototype.exec ( string )\n\n  // 21.2.5.3 get RegExp.prototype.flags\n  if (!('flags' in RegExp.prototype)) {\n    Object.defineProperty(\n      RegExp.prototype, 'flags', {\n        get: function() {\n          var s = String(this);\n          return s.substring(s.lastIndexOf('/') + 1);\n        }\n      });\n  }\n\n  // 21.2.5.4 get RegExp.prototype.global\n  // 21.2.5.5 get RegExp.prototype.ignoreCase\n\n  // 21.2.5.6 RegExp.prototype [ @@match ] ( string )\n  define(RegExp.prototype, $$match, function(string) {\n    var o = strict(this);\n    return orig_match.call(string, o);\n  });\n\n  // 21.2.5.7 get RegExp.prototype.multiline\n\n  // 21.2.5.8 RegExp.prototype [ @@replace ] ( string, replaceValue )\n  define(RegExp.prototype, $$replace, function(string, replaceValue) {\n    var o = strict(this);\n    return orig_replace.call(string, o, replaceValue);\n  });\n\n  // 21.2.5.9 RegExp.prototype [ @@search ] ( string )\n  define(RegExp.prototype, $$search, function(string) {\n    var o = strict(this);\n    return orig_search.call(string, o);\n  });\n\n  // 21.2.5.10 get RegExp.prototype.source\n\n  // 21.2.5.11 RegExp.prototype [ @@split ] ( string, limit )\n  define(RegExp.prototype, $$split, function(string, limit) {\n    var o = strict(this);\n    return orig_split.call(string, o, limit);\n  });\n\n  // 21.2.5.12 get RegExp.prototype.sticky\n  // 21.2.5.13 RegExp.prototype.test( S )\n  // 21.2.5.14 RegExp.prototype.toString ( )\n  // 21.2.5.15 get RegExp.prototype.unicode\n\n  // 21.2.6 Properties of RegExp Instances\n  // 21.2.6.1 lastIndex\n\n  // (No polyfillable changes from ES5)\n\n  // ---------------------------------------\n  // 22 Indexed Collections\n  // ---------------------------------------\n\n  // ---------------------------------------\n  // 22.1 Array Objects\n  // ---------------------------------------\n\n  // 22.1.1 The Array Constructor\n  // 22.1.1.1 Array ( )\n  // 22.1.1.2 Array (len)\n  // 22.1.1.3 Array (...items )\n\n  // 22.1.2 Properties of the Array Constructor\n\n  // 22.1.2.1 Array.from ( items [ , mapfn [ , thisArg ] ] )\n  define(\n    Array, 'from',\n    function from(items) {\n      var mapfn = arguments[1];\n      var thisArg = arguments[2];\n\n      var c = strict(this);\n      if (mapfn === undefined) {\n        var mapping = false;\n      } else {\n        if (!IsCallable(mapfn)) throw TypeError();\n        var t = thisArg;\n        mapping = true;\n      }\n      var usingIterator = GetMethod(items, $$iterator);\n      if (usingIterator !== undefined) {\n         if (IsConstructor(c)) {\n          var a = new c();\n        } else {\n          a = new Array(0);\n        }\n        var iterator = GetIterator(items, usingIterator);\n        var k = 0;\n        while (true) {\n          var next = IteratorStep(iterator);\n          if (next === false) {\n            a.length = k;\n            return a;\n          }\n          var nextValue = IteratorValue(next);\n          if (mapping)\n            var mappedValue = mapfn.call(t, nextValue);\n          else\n            mappedValue = nextValue;\n          a[k] = mappedValue;\n          k += 1;\n        }\n      }\n      var arrayLike = ToObject(items);\n      var lenValue = arrayLike.length;\n      var len = ToLength(lenValue);\n      if (IsConstructor(c)) {\n        a = new c(len);\n      } else {\n        a = new Array(len);\n      }\n      k = 0;\n      while (k < len) {\n        var kValue = arrayLike[k];\n        if (mapping)\n          mappedValue = mapfn.call(t, kValue, k);\n        else\n          mappedValue = kValue;\n        a[k] = mappedValue;\n        k += 1;\n      }\n      a.length = len;\n      return a;\n    });\n\n  // 22.1.2.2 Array.isArray ( arg )\n\n  // 22.1.2.3 Array.of ( ...items )\n  define(\n    Array, 'of',\n    function of() {\n      var items = arguments;\n\n      var lenValue = items.length;\n      var len = ToUint32(lenValue);\n      var c = strict(this), a;\n      if (IsConstructor(c)) {\n        a = new c(len);\n        a = ToObject(a);\n      } else {\n        a = new Array(len);\n      }\n      var k = 0;\n      while (k < len) {\n        a[k] = items[k];\n        k += 1;\n      }\n      a.length = len;\n      return a;\n    });\n\n  // 22.1.2.4 Array.prototype\n  // 22.1.2.5 get Array [ @@species ]\n  // 22.1.3 Properties of the Array Prototype Object\n  // 22.1.3.1 Array.prototype.concat ( ...arguments )\n  // 22.1.3.1.1 Runtime Semantics: IsConcatSpreadable ( O )\n  // 22.1.3.2 Array.prototype.constructor\n  // 22.1.3.3 Array.prototype.copyWithin (target, start [ , end ] )\n  define(\n    Array.prototype, 'copyWithin',\n    function copyWithin(target, start/*, end*/) {\n      var end = arguments[2];\n\n      var o = ToObject(this);\n      var lenVal = o.length;\n      var len = ToLength(lenVal);\n      len = max(len, 0);\n      var relativeTarget = ToInteger(target);\n      var to;\n      if (relativeTarget < 0)\n        to = max(len + relativeTarget, 0);\n      else\n        to = min(relativeTarget, len);\n      var relativeStart = ToInteger(start);\n      var from;\n      if (relativeStart < 0)\n        from = max(len + relativeStart, 0);\n      else\n        from = min(relativeStart, len);\n      var relativeEnd;\n      if (end === undefined)\n        relativeEnd = len;\n      else\n        relativeEnd = ToInteger(end);\n      var final;\n      if (relativeEnd < 0)\n        final = max(len + relativeEnd, 0);\n      else\n        final = min(relativeEnd, len);\n      var count = min(final - from, len - to);\n      var direction;\n      if (from < to && to < from + count) {\n        direction = -1;\n        from = from + count - 1;\n        to = to + count - 1;\n      } else {\n        direction = 1;\n      }\n      while (count > 0) {\n        var fromKey = String(from);\n        var toKey = String(to);\n        var fromPresent = HasProperty(o, fromKey);\n        if (fromPresent) {\n          var fromVal = o[fromKey];\n          o[toKey] = fromVal;\n        } else {\n          delete o[toKey];\n        }\n        from = from + direction;\n        to = to + direction;\n        count = count - 1;\n      }\n      return o;\n    });\n\n  // 22.1.3.4 Array.prototype.entries ( )\n  var nativeArrayIteratorMethods =\n        ('entries' in Array.prototype && 'next' in [].entries());\n\n  define(\n    Array.prototype, 'entries',\n    function entries() {\n      return CreateArrayIterator(this, 'key+value');\n    }, !nativeArrayIteratorMethods);\n\n  // 22.1.3.5 Array.prototype.every ( callbackfn [ , thisArg] )\n\n  // 22.1.3.6 Array.prototype.fill (value [ , start [ , end ] ] )\n  define(\n    Array.prototype, 'fill',\n    function fill(value/*, start, end*/) {\n      var start = arguments[1],\n          end = arguments[2];\n\n      var o = ToObject(this);\n      var lenVal = o.length;\n      var len = ToLength(lenVal);\n      len = max(len, 0);\n      var relativeStart = ToInteger(start);\n      var k;\n      if (relativeStart < 0)\n        k = max((len + relativeStart), 0);\n      else\n        k = min(relativeStart, len);\n      var relativeEnd;\n      if (end === undefined)\n        relativeEnd = len;\n      else\n        relativeEnd = ToInteger(end);\n      var final;\n      if (relativeEnd < 0)\n        final = max((len + relativeEnd), 0);\n      else\n        final = min(relativeEnd, len);\n      while (k < final) {\n        var pk = String(k);\n        o[pk] = value;\n        k += 1;\n      }\n      return o;\n    });\n\n  // 22.1.3.7 Array.prototype.filter ( callbackfn [ , thisArg ] )\n\n  // 22.1.3.8 Array.prototype.find ( predicate [ , thisArg ] )\n  define(\n    Array.prototype, 'find',\n    function find(predicate) {\n      var o = ToObject(this);\n      var lenValue = o.length;\n      var len = ToInteger(lenValue);\n      if (!IsCallable(predicate)) throw TypeError();\n      var t = arguments.length > 1 ? arguments[1] : undefined;\n      var k = 0;\n      while (k < len) {\n        var pk = String(k);\n        var kPresent = HasProperty(o, pk);\n        if (kPresent) {\n          var kValue = o[pk];\n          var testResult = predicate.call(t, kValue, k, o);\n          if (Boolean(testResult)) {\n            return kValue;\n          }\n        }\n        ++k;\n      }\n      return undefined;\n    });\n\n  // 22.1.3.9 Array.prototype.findIndex ( predicate [ , thisArg ] )\n  define(\n    Array.prototype, 'findIndex',\n    function findIndex(predicate) {\n      var o = ToObject(this);\n      var lenValue = o.length;\n      var len = ToLength(lenValue);\n      if (!IsCallable(predicate)) throw TypeError();\n      var t = arguments.length > 1 ? arguments[1] : undefined;\n      var k = 0;\n      while (k < len) {\n        var pk = String(k);\n        var kPresent = HasProperty(o, pk);\n        if (kPresent) {\n          var kValue = o[pk];\n          var testResult = predicate.call(t, kValue, k, o);\n          if (Boolean(testResult)) {\n            return k;\n          }\n        }\n        ++k;\n      }\n      return -1;\n    });\n\n  // 22.1.3.10 Array.prototype.forEach ( callbackfn [ , thisArg ] )\n  // 22.1.3.11 Array.prototype.indexOf ( searchElement [ , fromIndex ] )\n  // 22.1.3.12 Array.prototype.join (separator)\n\n  // 22.1.3.13 Array.prototype.keys ( )\n  define(\n    Array.prototype, 'keys',\n    function keys() {\n      return CreateArrayIterator(this, 'key');\n    }, !nativeArrayIteratorMethods);\n\n  // 22.1.3.14 Array.prototype.lastIndexOf ( searchElement [ , fromIndex ] )\n  // 22.1.3.15 Array.prototype.map ( callbackfn [ , thisArg ] )\n  // 22.1.3.16 Array.prototype.pop ( )\n  // 22.1.3.17 Array.prototype.push ( ...items )\n  // 22.1.3.18 Array.prototype.reduce ( callbackfn [ , initialValue ] )\n  // 22.1.3.19 Array.prototype.reduceRight ( callbackfn [ , initialValue ] )\n  // 22.1.3.20 Array.prototype.reverse ( )\n  // 22.1.3.21 Array.prototype.shift ( )\n  // 22.1.3.22 Array.prototype.slice (start, end)\n  // 22.1.3.23 Array.prototype.some ( callbackfn [ , thisArg ] )\n  // 22.1.3.24 Array.prototype.sort (comparefn)\n  // 22.1.3.25 Array.prototype.splice (start, deleteCount , ...items )\n  // 22.1.3.26 Array.prototype.toLocaleString ( [ reserved1 [ , reserved2 ] ] )\n  // 22.1.3.27 Array.prototype.toString ( )\n  // 22.1.3.28 Array.prototype.unshift ( ...items )\n\n  // 22.1.3.29 Array.prototype.values ( )\n  define(\n    Array.prototype, 'values',\n    function values() {\n      return CreateArrayIterator(this, 'value');\n    }, !nativeArrayIteratorMethods);\n\n  // 22.1.3.30 Array.prototype [ @@iterator ] ( )\n  define(\n    Array.prototype, $$iterator,\n    Array.prototype.values\n    );\n\n  // 22.1.3.31 Array.prototype [ @@unscopables ]\n  // 22.1.4 Properties of Array Instances\n  // 22.1.4.1 length\n\n  // 22.1.5 Array Iterator Objects\n  function ArrayIterator() {}\n\n  // 22.1.5.1 CreateArrayIterator Abstract Operation\n  function CreateArrayIterator(array, kind) {\n    var o = ToObject(array);\n    var iterator = new ArrayIterator;\n    set_internal(iterator, '[[IteratedObject]]', o);\n    set_internal(iterator, '[[ArrayIteratorNextIndex]]', 0);\n    set_internal(iterator, '[[ArrayIterationKind]]', kind);\n    return iterator;\n  }\n\n  // 22.1.5.2 The %ArrayIteratorPrototype% Object\n  var $ArrayIteratorPrototype$ = Object.create($IteratorPrototype$);\n  ArrayIterator.prototype = $ArrayIteratorPrototype$;\n\n  // 22.1.5.2.1 %ArrayIteratorPrototype%. next( )\n  define(\n    $ArrayIteratorPrototype$, 'next',\n    function next() {\n      var o = strict(this);\n      if (Type(o) !== 'object') throw TypeError();\n      var a = o['[[IteratedObject]]'],\n          index = o['[[ArrayIteratorNextIndex]]'],\n          itemKind = o['[[ArrayIterationKind]]'],\n          lenValue = a.length,\n          len = ToUint32(lenValue),\n          elementKey,\n          elementValue;\n      if (itemKind.indexOf('sparse') !== -1) {\n        var found = false;\n        while (!found && index < len) {\n          elementKey = String(index);\n          found = HasProperty(a, elementKey);\n          if (!found) {\n            index += 1;\n          }\n        }\n      }\n      if (index >= len) {\n        set_internal(o, '[[ArrayIteratorNextIndex]]', Infinity);\n        return CreateIterResultObject(undefined, true);\n      }\n      elementKey = index;\n      set_internal(o, '[[ArrayIteratorNextIndex]]', index + 1);\n      if (itemKind.indexOf('value') !== -1)\n        elementValue = a[elementKey];\n      if (itemKind.indexOf('key+value') !== -1)\n        return CreateIterResultObject([elementKey, elementValue], false);\n      if (itemKind.indexOf('key') !== -1)\n        return CreateIterResultObject(elementKey, false);\n      if (itemKind === 'value')\n        return CreateIterResultObject(elementValue, false);\n      throw Error('Internal error');\n    });\n\n  // 22.1.5.2.2 %ArrayIteratorPrototype% [ @@toStringTag ]\n  define($ArrayIteratorPrototype$, $$toStringTag, 'Array Iterator');\n\n  // 22.1.5.3 Properties of Array Iterator Instances\n\n\n  // ---------------------------------------\n  // 22.2 TypedArray Objects\n  // ---------------------------------------\n\n  // See typedarray.js for TypedArray polyfill\n\n  ['Int8Array', 'Uint8Array', 'Uint8ClampedArray',\n   'Int16Array', 'Uint16Array',\n   'Int32Array', 'Uint32Array',\n   'Float32Array', 'Float64Array'].forEach(function ($TypedArrayName$) {\n     if (!($TypedArrayName$ in global))\n       return;\n     var $TypedArray$ = global[$TypedArrayName$];\n\n     // 22.2.1 The %TypedArray% Intrinsic Object\n     // 22.2.1.1 %TypedArray% ( length )\n     // 22.2.1.2 %TypedArray% ( typedArray )\n     // 22.2.1.3 %TypedArray% ( object )\n     // 22.2.1.4 %TypedArray% ( buffer [ , byteOffset [ , length ] ] )\n     // 22.2.1.5 %TypedArray% ( all other argument combinations )\n     // 22.2.2 Properties of the %TypedArray% Intrinsic Object\n\n     // 22.2.2.1 %TypedArray%.from ( source [ , mapfn [ , thisArg ] ] )\n     define(\n       $TypedArray$, 'from',\n       function from(source) {\n         var mapfn = arguments[1];\n         var thisArg = arguments[2];\n\n         var c = strict(this);\n         if (!IsConstructor(c)) throw TypeError();\n         if (mapfn === undefined) {\n           var mapping = false;\n         } else {\n           if (IsCallable(mapfn)) throw TypeError();\n           var t = thisArg;\n           mapping = true;\n         }\n         var usingIterator = GetMethod(source, $$iterator);\n         if (usingIterator !== undefined) {\n           var iterator = GetIterator(source, usingIterator);\n           var values = [];\n           var next = true;\n           while (next !== false) {\n             next = IteratorStep(iterator);\n             if (next !== false) {\n               var nextValue = IteratorValue(next);\n               values.push(nextValue);\n             }\n           }\n           var len = values.length;\n           var newObj = new c(len);\n           var k = 0;\n           while (k < len) {\n             var kValue = values.shift();\n             if (mapping) {\n               var mappedValue = mapfn.call(t, kValue);\n             } else {\n               mappedValue = kValue;\n             }\n             newObj[k] = mappedValue;\n             ++k;\n           }\n           console.assert(values.length === 0);\n           return newObj;\n         }\n         var arrayLike = ToObject(source);\n         var lenValue = arrayLike.length;\n         len = ToLength(lenValue);\n         newObj = new c(len);\n         k = 0;\n         while (k < len) {\n           kValue = arrayLike[k];\n           if (mapping) {\n             mappedValue = mapfn.call(t, kValue, k);\n           } else {\n             mappedValue = kValue;\n           }\n           newObj[k] = mappedValue;\n           ++k;\n         }\n         return newObj;\n       });\n\n     // 22.2.2.2 %TypedArray%.of ( ...items )\n     define(\n       $TypedArray$, 'of',\n       function of() {\n         var items = arguments;\n\n         var len = items.length;\n         var c = strict(this);\n         var newObj = new c(len);\n         var k = 0;\n         while (k < len) {\n           newObj[k] = items[k];\n           ++k;\n         }\n         return newObj;\n       });\n\n     // 22.2.2.3 %TypedArray%.prototype\n     // 22.2.2.4 get %TypedArray% [ @@species ]\n     // 22.2.3 Properties of the %TypedArrayPrototype% Object\n     // 22.2.3.1 get %TypedArray%.prototype.buffer\n     // 22.2.3.2 get %TypedArray%.prototype.byteLength\n     // 22.2.3.3 get %TypedArray%.prototype.byteOffset\n     // 22.2.3.4 %TypedArray%.prototype.constructor\n\n     // 22.2.3.5 %TypedArray%.prototype.copyWithin (target, start [, end ] )\n     define($TypedArray$.prototype, 'copyWithin', Array.prototype.copyWithin);\n\n     // 22.2.3.6 %TypedArray%.prototype.entries ( )\n     define($TypedArray$.prototype, 'entries', Array.prototype.entries);\n\n     // 22.2.3.7 %TypedArray%.prototype.every ( callbackfn [ , thisArg ] )\n     define($TypedArray$.prototype, 'every', Array.prototype.every);\n\n     // 22.2.3.8 %TypedArray%.prototype.fill (value [ , start [ , end ] ] )\n     define(\n       $TypedArray$.prototype, 'fill',\n       //Array.prototype.fill // Doesn't work in Safari 7\n       function fill(value/*, start, end*/) {\n         var start = arguments[1],\n             end = arguments[2];\n\n         var o = ToObject(this);\n         var lenVal = o.length;\n         var len = ToLength(lenVal);\n         len = max(len, 0);\n         var relativeStart = ToInteger(start);\n         var k;\n         if (relativeStart < 0) k = max((len + relativeStart), 0);\n         else k = min(relativeStart, len);\n         var relativeEnd;\n         if (end === undefined) relativeEnd = len;\n         else relativeEnd = ToInteger(end);\n         var final;\n         if (relativeEnd < 0) final = max((len + relativeEnd), 0);\n         else final = min(relativeEnd, len);\n         while (k < final) {\n           var pk = String(k);\n           o[pk] = value;\n           k += 1;\n         }\n         return o;\n       });\n\n     // 22.2.3.9 %TypedArray%.prototype.filter ( callbackfn [ , thisArg ] )\n     define(\n       $TypedArray$.prototype, 'filter',\n       function filter(callbackfn) {\n         var thisArg = arguments[1];\n\n         var o = ToObject(this);\n         var lenVal = o.length;\n         var len = ToLength(lenVal);\n         if (!IsCallable(callbackfn)) throw TypeError();\n         var t = thisArg;\n         var c = o.constructor;\n         var kept = [];\n         var k = 0;\n         var captured = 0;\n         while (k < len) {\n           var kValue = o[k];\n           var selected = callbackfn.call(t, kValue, k, o);\n           if (selected) {\n             kept.push(kValue);\n             ++captured;\n           }\n           ++k;\n         }\n         var a = new c(captured);\n         var n = 0;\n         for (var i = 0; i < kept.length; ++i) {\n           var e = kept[i];\n           a[n] = e;\n           ++n;\n         }\n         return a;\n       });\n\n     // 22.2.3.10 %TypedArray%.prototype.find (predicate [ , thisArg ] )\n     define($TypedArray$.prototype, 'find', Array.prototype.find);\n\n     // 22.2.3.11 %TypedArray%.prototype.findIndex ( predicate [ , thisArg ] )\n     define($TypedArray$.prototype, 'findIndex', Array.prototype.findIndex);\n\n     // 22.2.3.12 %TypedArray%.prototype.forEach ( callbackfn [ , thisArg ] )\n     define($TypedArray$.prototype, 'forEach', Array.prototype.forEach);\n\n     // 22.2.3.13 %TypedArray%.prototype.indexOf (searchElement [ , fromIndex ] )\n     define($TypedArray$.prototype, 'indexOf', Array.prototype.indexOf);\n\n     // 22.2.3.14 %TypedArray%.prototype.join ( separator )\n     define($TypedArray$.prototype, 'join', Array.prototype.join);\n\n     // 22.2.3.15 %TypedArray%.prototype.keys ( )\n     define($TypedArray$.prototype, 'keys', Array.prototype.keys);\n\n     // 22.2.3.16 %TypedArray%.prototype.lastIndexOf ( searchElement [ , fromIndex ] )\n     define($TypedArray$.prototype, 'lastIndexOf', Array.prototype.lastIndexOf);\n\n     // 22.2.3.17 get %TypedArray%.prototype.length\n\n     // 22.2.3.18 %TypedArray%.prototype.map ( callbackfn [ , thisArg ] )\n     define(\n       $TypedArray$.prototype, 'map',\n       function map(callbackfn) {\n         var thisArg = arguments[1];\n\n         var o = ToObject(this);\n         var lenValue = o.length;\n         var len = ToLength(lenValue);\n         if (!IsCallable(callbackfn)) throw TypeError();\n         var t = thisArg;\n         var a = undefined;\n         var c = o.constructor;\n         if (IsConstructor(c))\n           a = new c(len);\n         if (a === undefined)\n           a = new Array(len);\n         var k = 0;\n         while (k < len) {\n           var kPresent = HasProperty(o, k);\n           if (kPresent) {\n             var kValue = o[k];\n             var mappedValue = callbackfn.call(t, kValue, k, o);\n             a[k] = mappedValue;\n           }\n           ++k;\n         }\n         return a;\n       });\n\n     // 22.2.3.19 %TypedArray%.prototype.reduce ( callbackfn [, initialValue] )\n     define($TypedArray$.prototype, 'reduce', Array.prototype.reduce);\n\n     // 22.2.3.20 %TypedArray%.prototype.reduceRight ( callbackfn [, initialValue] )\n     define($TypedArray$.prototype, 'reduceRight', Array.prototype.reduceRight);\n\n     // 22.2.3.21 %TypedArray%.prototype.reverse ( )\n     define($TypedArray$.prototype, 'reverse', Array.prototype.reverse);\n\n     // 22.2.3.22 %TypedArray%.prototype.set ( overloaded [ , offset ])\n     // 22.2.3.22.1 %TypedArray%.prototype.set (array [ , offset ] )\n     // 22.2.3.22.2 %TypedArray%.prototype.set(typedArray [, offset ] )\n\n     // 22.2.3.23 %TypedArray%.prototype.slice ( start, end )\n     define(\n       $TypedArray$.prototype, 'slice',\n       function slice(start, end) {\n         var o = ToObject(this);\n         var lenVal = o.length;\n         var len = ToLength(lenVal);\n         var relativeStart = ToInteger(start);\n         var k = (relativeStart < 0) ? max(len + relativeStart, 0) : min(relativeStart, len);\n         var relativeEnd = (end === undefined) ? len : ToInteger(end);\n         var final = (relativeEnd < 0) ? max(len + relativeEnd, 0) : min(relativeEnd, len);\n         var count = final - k;\n         var c = o.constructor;\n         if (IsConstructor(c)) {\n           var a = new c(count);\n         } else {\n           throw TypeError();\n         }\n         var n = 0;\n         while (k < final) {\n           var kValue = o[k];\n           a[n] = kValue;\n           ++k;\n           ++n;\n         }\n         return a;\n       });\n\n     // 22.2.3.24 %TypedArray%.prototype.some ( callbackfn [ , thisArg ] )\n     define($TypedArray$.prototype, 'some', Array.prototype.some);\n\n     // 22.2.3.25 %TypedArray%.prototype.sort ( comparefn )\n     define(\n       $TypedArray$.prototype, 'sort',\n       function sort() {\n         var comparefn = arguments[0];\n\n         function sortCompare(x, y) {\n           console.assert(Type(x) === 'number' && Type(y) === 'number');\n           if (x !== x && y !== y) return +0;\n           if (x !== x) return 1;\n           if (y !== y) return -1;\n           if (comparefn !== undefined) {\n             return comparefn(x, y);\n           }\n           if (x < y) return -1;\n           if (x > y) return 1;\n           return +0;\n         }\n         return Array.prototype.sort.call(this, sortCompare);\n       });\n\n     // 22.2.3.26 %TypedArray%.prototype.subarray( [ begin [ , end ] ] )\n     // 22.2.3.27 %TypedArray%.prototype.toLocaleString ([ reserved1 [ , reserved2 ] ])\n     // 22.2.3.28 %TypedArray%.prototype.toString ( )\n\n     // 22.2.3.29 %TypedArray%.prototype.values ( )\n     define($TypedArray$.prototype, 'values', Array.prototype.values);\n\n     // 22.2.3.30 %TypedArray%.prototype [ @@iterator ] ( )\n     define(\n       $TypedArray$.prototype, $$iterator,\n       $TypedArray$.prototype.values\n     );\n\n     // 22.2.3.31 get %TypedArray%.prototype [ @@toStringTag ]\n     define($TypedArray$.prototype, $$toStringTag, $TypedArrayName$);\n\n     // 22.2.4 The TypedArray Constructors\n     // 22.2.4.1TypedArray( ... argumentsList)\n     // 22.2.5 Properties of the TypedArray Constructors\n     // 22.2.5.1 TypedArray.BYTES_PER_ELEMENT\n     // 22.2.5.2 TypedArray.prototype\n     // 22.2.6 Properties of TypedArray Prototype Objects\n     // 22.2.6.1 TypedArray.prototype.BYTES_PER_ELEMENT\n     // 22.2.6.2 TypedArray.prototype.constructor\n     // 22.2.7 Properties of TypedArray Instances\n   });\n\n  // ---------------------------------------\n  // 23 Keyed Collection\n  // ---------------------------------------\n\n  // ---------------------------------------\n  // 23.1 Map Objects\n  // ---------------------------------------\n\n  (function() {\n    // 23.1.1 The Map Constructor\n\n    // 23.1.1.1 Map ( [ iterable ] )\n    /** @constructor */\n    function Map(/*iterable*/) {\n      var map = strict(this);\n      var iterable = arguments[0];\n\n      if (Type(map) !== 'object') throw TypeError();\n      if ('[[MapData]]' in map) throw TypeError();\n\n      if (iterable !== undefined) {\n        var adder = map['set'];\n        if (!IsCallable(adder)) throw TypeError();\n        var iter = GetIterator(ToObject(iterable));\n      }\n      set_internal(map, '[[MapData]]', { keys: [], values: [] });\n      if (iter === undefined) return map;\n      while (true) {\n        var next = IteratorStep(iter);\n        if (next === false)\n          return map;\n        var nextItem = IteratorValue(next);\n        if (Type(nextItem) !== 'object') throw TypeError();\n        var k = nextItem[0];\n        var v = nextItem[1];\n        adder.call(map, k, v);\n      }\n\n      return map;\n    }\n\n    if (!('Map' in global) || OVERRIDE_NATIVE_FOR_TESTING ||\n        (function() { try { new global.Map([]); return false; } catch (_) { return true; } }()) ||\n        (function() { try { return !new global.Map().entries().next; } catch (_) { return true; } }()) ||\n        (new global.Map([['a', 1]]).size !== 1))\n      global.Map = Map;\n\n\n    function MapDataIndexOf(mapData, key) {\n      var i;\n      if (key === key) return mapData.keys.indexOf(key);\n      // Slow case for NaN\n      for (i = 0; i < mapData.keys.length; i += 1)\n        if (SameValueZero(mapData.keys[i], key)) return i;\n      return -1;\n    }\n\n    // 23.1.1.2 new Map ( ... argumentsList )\n    // 23.1.2 Properties of the Map Constructor\n    // 23.1.2.1 Map.prototype\n    var $MapPrototype$ = {};\n    Map.prototype = $MapPrototype$;\n\n    // 23.1.2.2 get Map [ @@species ]\n\n    // 23.1.3 Properties of the Map Prototype Object\n    // 23.1.3.1 Map.prototype.clear ()\n    define(\n      Map.prototype, 'clear',\n      function clear() {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        if (!('[[MapData]]' in m)) throw TypeError();\n        if (m['[[MapData]]'] === undefined) throw TypeError();\n        var entries = m['[[MapData]]'];\n        entries.keys.length = 0;\n        entries.values.length = 0;\n        return undefined;\n      });\n\n    // 23.1.3.2 Map.prototype.constructor\n\n    // 23.1.3.3 Map.prototype.delete ( key )\n    define(\n      Map.prototype, 'delete',\n      function delete_(key) {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        if (!('[[MapData]]' in m)) throw TypeError();\n        if (m['[[MapData]]'] === undefined) throw TypeError();\n        var entries = m['[[MapData]]'];\n        var i = MapDataIndexOf(entries, key);\n        if (i < 0) return false;\n        entries.keys[i] = empty;\n        entries.values[i] = empty;\n        return true;\n      });\n\n    // 23.1.3.4 Map.prototype.entries ( )\n    define(\n      Map.prototype, 'entries',\n      function entries() {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        return CreateMapIterator(m, 'key+value');\n      });\n\n    // 23.1.3.5 Map.prototype.forEach ( callbackfn [ , thisArg ] )\n    define(\n      Map.prototype, 'forEach',\n      function forEach(callbackfn /*, thisArg*/) {\n        var thisArg = arguments[1];\n\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        if (!('[[MapData]]' in m)) throw TypeError();\n        if (m['[[MapData]]'] === undefined) throw TypeError();\n        var entries = m['[[MapData]]'];\n\n        if (!IsCallable(callbackfn)) {\n          throw TypeError('First argument to forEach is not callable.');\n        }\n        for (var i = 0; i < entries.keys.length; ++i) {\n          if (entries.keys[i] !== empty) {\n            callbackfn.call(thisArg, entries.values[i], entries.keys[i], m);\n          }\n        }\n        return undefined;\n      });\n\n    // 23.1.3.6 Map.prototype.get ( key )\n    define(\n      Map.prototype, 'get',\n      function get(key) {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        if (!('[[MapData]]' in m)) throw TypeError();\n        if (m['[[MapData]]'] === undefined) throw TypeError();\n        var entries = m['[[MapData]]'];\n        var i = MapDataIndexOf(entries, key);\n        if (i >= 0) return entries.values[i];\n        return undefined;\n      });\n\n    // 23.1.3.7 Map.prototype.has ( key )\n    define(\n      Map.prototype, 'has',\n      function has(key) {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        if (!('[[MapData]]' in m)) throw TypeError();\n        if (m['[[MapData]]'] === undefined) throw TypeError();\n        var entries = m['[[MapData]]'];\n        if (MapDataIndexOf(entries, key) >= 0) return true;\n        return false;\n      });\n\n    // 23.1.3.8 Map.prototype.keys ( )\n    define(\n      Map.prototype, 'keys',\n      function keys() {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        return CreateMapIterator(m, 'key');\n      });\n\n    // 23.1.3.9 Map.prototype.set ( key , value )\n    define(\n      Map.prototype, 'set',\n      function set(key, value) {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        if (!('[[MapData]]' in m)) throw TypeError();\n        if (m['[[MapData]]'] === undefined) throw TypeError();\n        var entries = m['[[MapData]]'];\n        var i = MapDataIndexOf(entries, key);\n        if (i < 0) i = entries.keys.length;\n        if (SameValue(key, -0)) key = 0;\n        entries.keys[i] = key;\n        entries.values[i] = value;\n        return m;\n      });\n\n    // 23.1.3.10 get Map.prototype.size\n    Object.defineProperty(\n      Map.prototype, 'size', {\n        get: function() {\n          var m = strict(this);\n          if (Type(m) !== 'object') throw TypeError();\n          if (!('[[MapData]]' in m)) throw TypeError();\n          if (m['[[MapData]]'] === undefined) throw TypeError();\n          var entries = m['[[MapData]]'];\n          var count = 0;\n          for (var i = 0; i < entries.keys.length; ++i) {\n            if (entries.keys[i] !== empty)\n              count = count + 1;\n          }\n          return count;\n        }\n      });\n\n    // 23.1.3.11 Map.prototype.values ( )\n    define(\n      Map.prototype, 'values',\n      function values() {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        return CreateMapIterator(m, 'value');\n      });\n\n    // 23.1.3.12 Map.prototype [ @@iterator ]( )\n    define(\n      Map.prototype, $$iterator,\n      function() {\n        var m = strict(this);\n        if (Type(m) !== 'object') throw TypeError();\n        return CreateMapIterator(m, 'key+value');\n      });\n\n    // 23.1.3.13 Map.prototype [ @@toStringTag ]\n    define(global.Map.prototype, $$toStringTag, 'Map');\n\n    // 23.1.4 Properties of Map Instances\n    // 23.1.5 Map Iterator Objects\n\n    /** @constructor */\n    function MapIterator() {}\n\n    // 23.1.5.1 CreateMapIterator Abstract Operation\n    function CreateMapIterator(map, kind) {\n      if (Type(map) !== 'object') throw TypeError();\n      if (!('[[MapData]]' in map)) throw TypeError();\n      if (map['[[MapData]]'] === undefined) throw TypeError();\n      var iterator = new MapIterator;\n      set_internal(iterator, '[[Map]]', map);\n      set_internal(iterator, '[[MapNextIndex]]', 0);\n      set_internal(iterator, '[[MapIterationKind]]', kind);\n      return iterator;\n    }\n\n    // 23.1.5.2 The %MapIteratorPrototype% Object\n    var $MapIteratorPrototype$ = Object.create($IteratorPrototype$);\n    MapIterator.prototype = $MapIteratorPrototype$;\n\n    // 23.1.5.2.1 %MapIteratorPrototype%.next ( )\n    define(\n      $MapIteratorPrototype$, 'next',\n      function next() {\n        var o = strict(this);\n        if (Type(o) !== 'object') throw TypeError();\n        var m = o['[[Map]]'],\n            index = o['[[MapNextIndex]]'],\n            itemKind = o['[[MapIterationKind]]'],\n            entries = m['[[MapData]]'];\n        while (index < entries.keys.length) {\n          var e = {key: entries.keys[index], value: entries.values[index]};\n          index = index += 1;\n          set_internal(o, '[[MapNextIndex]]', index);\n          if (e.key !== empty) {\n            if (itemKind === 'key') {\n              return CreateIterResultObject(e.key, false);\n            } else if (itemKind === 'value') {\n              return CreateIterResultObject(e.value, false);\n            } else {\n              return CreateIterResultObject([e.key, e.value], false);\n            }\n          }\n        }\n        return CreateIterResultObject(undefined, true);\n      });\n\n    // 23.1.5.2.2 %MapIteratorPrototype% [ @@toStringTag ]\n    define($MapIteratorPrototype$, $$toStringTag, 'Map Iterator');\n\n    // 23.1.5.3 Properties of Map Iterator Instances\n  }());\n\n  // ---------------------------------------\n  // 23.2 Set Objects\n  // ---------------------------------------\n\n  (function() {\n    // 23.2.1 The Set Constructor\n    // 23.2.1.1 Set ( [ iterable ] )\n\n    /** @constructor */\n    function Set(/*iterable*/) {\n      var set = strict(this);\n      var iterable = arguments[0];\n\n      if (Type(set) !== 'object') throw TypeError();\n      if ('[[SetData]]' in set) throw TypeError();\n\n      if (iterable !== undefined) {\n        var adder = set['add'];\n        if (!IsCallable(adder)) throw TypeError();\n        var iter = GetIterator(ToObject(iterable));\n      }\n      set_internal(set, '[[SetData]]', []);\n      if (iter === undefined) return set;\n      while (true) {\n        var next = IteratorStep(iter);\n        if (next === false)\n          return set;\n        var nextValue = IteratorValue(next);\n        adder.call(set, nextValue);\n      }\n\n      return set;\n    }\n\n    if (!('Set' in global) || OVERRIDE_NATIVE_FOR_TESTING ||\n        (function() { try { return !new global.Set().entries().next; } catch (_) { return true; } }()) ||\n        (new global.Set([1]).size !== 1))\n      global.Set = Set;\n\n    function SetDataIndexOf(setData, key) {\n      var i;\n      if (key === key)\n        return setData.indexOf(key);\n      // Slow case for NaN\n      for (i = 0; i < setData.length; i += 1)\n        if (SameValueZero(setData[i], key)) return i;\n      return -1;\n    }\n\n    // 23.2.1.2 new Set ( ...argumentsList )\n    // 23.2.2 Properties of the Set Constructor\n\n    // 23.2.2.1 Set.prototype\n    var $SetPrototype$ =  {};\n    Set.prototype = $SetPrototype$;\n\n    // 23.2.2.2 get Set [ @@species ]\n    // 23.2.3 Properties of the Set Prototype Object\n\n    // 23.2.3.1 Set.prototype.add (value )\n    define(\n      Set.prototype, 'add',\n      function add(value) {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        if (!('[[SetData]]' in s)) throw TypeError();\n        if (s['[[SetData]]'] === undefined) throw TypeError();\n        if (SameValue(value, -0)) value = 0;\n        var entries = s['[[SetData]]'];\n        var i = SetDataIndexOf(entries, value);\n        if (i < 0) i = s['[[SetData]]'].length;\n        s['[[SetData]]'][i] = value;\n\n        return s;\n      });\n\n    // 23.2.3.2 Set.prototype.clear ()\n    define(\n      Set.prototype, 'clear',\n      function clear() {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        if (!('[[SetData]]' in s)) throw TypeError();\n        if (s['[[SetData]]'] === undefined) throw TypeError();\n        var entries = s['[[SetData]]'];\n        entries.length = 0;\n        return undefined;\n      });\n\n    // 23.2.3.3 Set.prototype.constructor\n    // 23.2.3.4 Set.prototype.delete ( value )\n    define(\n      Set.prototype, 'delete',\n      function delete_(value) {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        if (!('[[SetData]]' in s)) throw TypeError();\n        if (s['[[SetData]]'] === undefined) throw TypeError();\n        var entries = s['[[SetData]]'];\n        var i = SetDataIndexOf(entries, value);\n        if (i < 0) return false;\n        entries[i] = empty;\n        return true;\n      });\n\n    // 23.2.3.5 Set.prototype.entries ( )\n    define(\n      Set.prototype, 'entries',\n      function entries() {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        return CreateSetIterator(s, 'key+value');\n      });\n\n    // 23.2.3.6 Set.prototype.forEach ( callbackfn [ , thisArg ] )\n    define(\n      Set.prototype, 'forEach',\n      function forEach(callbackfn/*, thisArg*/) {\n        var thisArg = arguments[1];\n\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        if (!('[[SetData]]' in s)) throw TypeError();\n        if (s['[[SetData]]'] === undefined) throw TypeError();\n        var entries = s['[[SetData]]'];\n\n        if (!IsCallable(callbackfn)) {\n          throw TypeError('First argument to forEach is not callable.');\n        }\n        for (var i = 0; i < entries.length; ++i) {\n          if (entries[i] !== empty) {\n            callbackfn.call(thisArg, entries[i], entries[i], s);\n          }\n        }\n      });\n\n    // 23.2.3.7 Set.prototype.has ( value )\n    define(\n      Set.prototype, 'has',\n      function has(key) {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        if (!('[[SetData]]' in s)) throw TypeError();\n        if (s['[[SetData]]'] === undefined) throw TypeError();\n        var entries = s['[[SetData]]'];\n        return SetDataIndexOf(entries, key) !== -1;\n      });\n\n    // 23.2.3.8 Set.prototype.keys ( )\n    // See Set.prototype.values\n\n    // 23.2.3.9 get Set.prototype.size\n    Object.defineProperty(\n      Set.prototype, 'size', {\n        get: function() {\n          var s = strict(this);\n          if (Type(s) !== 'object') throw TypeError();\n          if (!('[[SetData]]' in s)) throw TypeError();\n          if (s['[[SetData]]'] === undefined) throw TypeError();\n          var entries = s['[[SetData]]'];\n          var count = 0;\n          for (var i = 0; i < entries.length; ++i) {\n            if (entries[i] !== empty)\n              count = count + 1;\n          }\n          return count;\n        }\n      });\n\n    // 23.2.3.10 Set.prototype.values ( )\n    define(\n      Set.prototype, 'values',\n      function values() {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        return CreateSetIterator(s, 'value');\n      });\n    // NOTE: function name is still 'values':\n    Set.prototype.keys = Set.prototype.values;\n\n    // 23.2.3.11 Set.prototype [@@iterator ] ( )\n    define(\n      Set.prototype, $$iterator,\n      function() {\n        var s = strict(this);\n        if (Type(s) !== 'object') throw TypeError();\n        return CreateSetIterator(s);\n      });\n\n    // 23.2.3.12 Set.prototype [ @@toStringTag ]\n    define(global.Set.prototype, $$toStringTag, 'Set');\n\n    // 23.2.4 Properties of Set Instances\n    // 23.2.5 Set Iterator Objects\n    /** @constructor */\n    function SetIterator() {}\n\n    // 23.2.5.1 CreateSetIterator Abstract Operation\n    function CreateSetIterator(set, kind) {\n      if (Type(set) !== 'object') throw TypeError();\n      if (!('[[SetData]]' in set)) throw TypeError();\n      if (set['[[SetData]]'] === undefined) throw TypeError();\n      var iterator = new SetIterator;\n      set_internal(iterator, '[[IteratedSet]]', set);\n      set_internal(iterator, '[[SetNextIndex]]', 0);\n      set_internal(iterator, '[[SetIterationKind]]', kind);\n      return iterator;\n    }\n\n    // 23.2.5.2 The %SetIteratorPrototype% Object\n    var $SetIteratorPrototype$ = Object.create($IteratorPrototype$);\n    SetIterator.prototype = $SetIteratorPrototype$;\n\n    // 23.2.5.2.1 %SetIteratorPrototype%.next( )\n    define(\n      $SetIteratorPrototype$, 'next',\n      function next() {\n        var o = strict(this);\n        if (Type(o) !== 'object') throw TypeError();\n        var s = o['[[IteratedSet]]'],\n            index = o['[[SetNextIndex]]'],\n            itemKind = o['[[SetIterationKind]]'],\n            entries = s['[[SetData]]'];\n        while (index < entries.length) {\n          var e = entries[index];\n          index = index += 1;\n          set_internal(o, '[[SetNextIndex]]', index);\n          if (e !== empty) {\n            if (itemKind === 'key+value')\n              return CreateIterResultObject([e, e], false);\n            return CreateIterResultObject(e, false);\n          }\n        }\n        return CreateIterResultObject(undefined, true);\n      });\n\n    // 23.2.5.2.2 %SetIteratorPrototype% [ @@toStringTag ]\n    define($SetIteratorPrototype$, $$toStringTag, 'Set Iterator');\n\n    // 23.2.5.3 Properties of Set Iterator Instances\n\n  }());\n\n  // ---------------------------------------\n  // 23.3 WeakMap Objects\n  // ---------------------------------------\n\n  (function() {\n    // 23.3.1 The WeakMap Constructor\n    // 23.3.1.1 WeakMap ( [ iterable ] )\n    /** @constructor */\n    function WeakMap(/*iterable*/) {\n      var map = strict(this);\n      var iterable = arguments[0];\n\n      if (Type(map) !== 'object') throw TypeError();\n      if ('[[WeakMapData]]' in map) throw TypeError();\n\n      if (iterable !== undefined) {\n        var adder = map['set'];\n        if (!IsCallable(adder)) throw TypeError();\n        var iter = GetIterator(ToObject(iterable));\n      }\n      set_internal(map, '[[WeakMapData]]', new EphemeronTable);\n      if (iter === undefined) return map;\n      while (true) {\n        var next = IteratorStep(iter);\n        if (next === false)\n          return map;\n        var nextValue = IteratorValue(next);\n        if (Type(nextValue) !== 'object') throw TypeError();\n        var k = nextValue[0];\n        var v = nextValue[1];\n        adder.call(map, k, v);\n      }\n\n      return map;\n    }\n\n    if (!('WeakMap' in global) || OVERRIDE_NATIVE_FOR_TESTING)\n      global.WeakMap = WeakMap;\n\n    // 23.3.2 Properties of the WeakMap Constructor\n    // 23.3.2.1 WeakMap.prototype\n    var $WeakMapPrototype$ = {};\n    WeakMap.prototype = $WeakMapPrototype$;\n\n\n\n   // 23.3.2.2 WeakMap[ @@create ] ( )\n    // 23.3.3 Properties of the WeakMap Prototype Object\n\n    // 23.3.3.1 WeakMap.prototype.constructor\n\n    // 23.3.3.2 WeakMap.prototype.delete ( key )\n    define(\n      WeakMap.prototype, 'delete',\n      function delete_(key) {\n        var M = strict(this);\n        if (Type(M) !== 'object') throw TypeError();\n        if (M['[[WeakMapData]]'] === undefined) throw TypeError();\n        if (Type(key) !== 'object') throw TypeError('Expected object');\n        return M['[[WeakMapData]]'].remove(key);\n      });\n\n    // 23.3.3.3 WeakMap.prototype.get ( key )\n    define(\n      WeakMap.prototype, 'get',\n      function get(key, defaultValue) {\n        var M = strict(this);\n        if (Type(M) !== 'object') throw TypeError();\n        if (M['[[WeakMapData]]'] === undefined) throw TypeError();\n        if (Type(key) !== 'object') throw TypeError('Expected object');\n        return M['[[WeakMapData]]'].get(key, defaultValue);\n      });\n\n    // 23.3.3.4 WeakMap.prototype.has ( key )\n    define(\n      WeakMap.prototype, 'has',\n      function has(key) {\n        var M = strict(this);\n        if (Type(M) !== 'object') throw TypeError();\n        if (M['[[WeakMapData]]'] === undefined) throw TypeError();\n        if (Type(key) !== 'object') throw TypeError('Expected object');\n        return M['[[WeakMapData]]'].has(key);\n      });\n\n    // 23.3.3.5 WeakMap.prototype.set ( key , value )\n    define(\n      WeakMap.prototype, 'set',\n      function set(key, value) {\n        var M = strict(this);\n        if (Type(M) !== 'object') throw TypeError();\n        if (M['[[WeakMapData]]'] === undefined) throw TypeError();\n        if (Type(key) !== 'object') throw TypeError('Expected object');\n        M['[[WeakMapData]]'].set(key, value);\n        return M;\n      });\n\n    // 23.3.3.6 WeakMap.prototype [ @@toStringTag ]\n    define(global.WeakMap.prototype, $$toStringTag, 'WeakMap');\n\n    // 23.3.4 Properties of WeakMap Instances\n\n    // Polyfills for incomplete native implementations:\n    (function() {\n      var wm = new global.WeakMap();\n      var orig = global.WeakMap.prototype.set;\n      define(global.WeakMap.prototype, 'set', function set() {\n        orig.apply(this, arguments);\n        return this;\n      }, wm.set({}, 0) !== wm);\n    }());\n  }());\n\n  // ---------------------------------------\n  // 23.4 WeakSet Objects\n  // ---------------------------------------\n\n  (function() {\n    // 23.4.1 The WeakSet Constructor\n    // 23.4.1.1 WeakSet ( [ iterable ] )\n    /** @constructor */\n    function WeakSet(/*iterable*/) {\n      var set = strict(this);\n      var iterable = arguments[0];\n\n      if (Type(set) !== 'object') throw TypeError();\n      if ('[[WeakSetData]]' in set) throw TypeError();\n\n      if (iterable !== undefined) {\n        var adder = set['add'];\n        if (!IsCallable(adder)) throw TypeError();\n        var iter = GetIterator(ToObject(iterable));\n      }\n      set_internal(set, '[[WeakSetData]]', new EphemeronTable);\n      if (iter === undefined) return set;\n      while (true) {\n        var next = IteratorStep(iter);\n        if (next === false)\n          return set;\n        var nextValue = IteratorValue(next);\n        adder.call(set, nextValue);\n      }\n\n      return set;\n    }\n\n    if (!('WeakSet' in global) || OVERRIDE_NATIVE_FOR_TESTING)\n      global.WeakSet = WeakSet;\n\n    // 23.4.2 Properties of the WeakSet Constructor\n    // 23.4.2.1 WeakSet.prototype\n    var $WeakSetPrototype$ = {};\n    WeakSet.prototype = $WeakSetPrototype$;\n\n    // 23.4.3 Properties of the WeakSet Prototype Object\n    // 23.4.3.1 WeakSet.prototype.add (value )\n    define(\n      WeakSet.prototype, 'add',\n      function add(value) {\n        var S = strict(this);\n        if (Type(S) !== 'object') throw TypeError();\n        if (S['[[WeakSetData]]'] === undefined) throw TypeError();\n        if (Type(value) !== 'object') throw TypeError('Expected object');\n        S['[[WeakSetData]]'].set(value, true);\n        return S;\n      });\n\n    // 23.4.3.2 WeakSet.prototype.constructor\n    // 23.4.3.3 WeakSet.prototype.delete ( value )\n    define(\n      WeakSet.prototype, 'delete',\n      function delete_(value) {\n        var S = strict(this);\n        if (Type(S) !== 'object') throw TypeError();\n        if (S['[[WeakSetData]]'] === undefined) throw TypeError();\n        if (Type(value) !== 'object') throw TypeError('Expected object');\n        return S['[[WeakSetData]]'].remove(value);\n      });\n\n    // 23.4.3.4 WeakSet.prototype.has ( value )\n    define(\n      WeakSet.prototype, 'has',\n      function has(key) {\n        var S = strict(this);\n        if (Type(S) !== 'object') throw TypeError();\n        if (S['[[WeakSetData]]'] === undefined) throw TypeError();\n        if (Type(key) !== 'object') throw TypeError('Expected object');\n        return S['[[WeakSetData]]'].has(key);\n      });\n\n    // 23.4.3.5 WeakSet.prototype [ @@toStringTag ]\n    define(global.WeakSet.prototype, $$toStringTag, 'WeakSet');\n\n    // 23.4.4 Properties of WeakSet Instances\n\n    // Polyfills for incomplete native implementations:\n    (function() {\n      var ws = new global.WeakSet();\n      var orig = global.WeakSet.prototype.add;\n      define(global.WeakSet.prototype, 'add', function add() {\n        orig.apply(this, arguments);\n        return this;\n      }, ws.add({}) !== ws);\n    }());\n  }());\n\n  // ---------------------------------------\n  // 24 Structured Data\n  // ---------------------------------------\n\n  // ---------------------------------------\n  // 24.1 ArrayBuffer Objects\n  // ---------------------------------------\n\n  // See typedarray.js for TypedArray polyfill\n\n  (function() {\n    if (!('ArrayBuffer' in global))\n      return;\n\n    // 24.1.1 Abstract Operations For ArrayBuffer Objects\n    // 24.1.1.1 AllocateArrayBuffer( constructor, byteLength )\n    // 24.1.1.2 IsDetachedBuffer( arrayBuffer )\n    // 24.1.1.3 DetachArrayBuffer( arrayBuffer )\n    // 24.1.1.4 CloneArrayBuffer( srcBuffer, srcByteOffset [, cloneConstructor] )\n    // 24.1.1.5 GetValueFromBuffer ( arrayBuffer, byteIndex, type, isLittleEndian )\n    // 24.1.1.6 SetValueInBuffer ( arrayBuffer, byteIndex, type, value, isLittleEndian )\n    // 24.1.2 The ArrayBuffer Constructor\n    // 24.1.2.1 ArrayBuffer( length )\n    // 24.1.3 Properties of the ArrayBuffer Constructor\n\n    // 24.1.3.1 ArrayBuffer.isView ( arg )\n    define(\n      ArrayBuffer, 'isView',\n      function isView(arg) {\n        if (Type(arg) !== 'object') return false;\n        if ('buffer' in arg && arg.buffer instanceof ArrayBuffer) return true;\n        return false;\n      });\n\n    // 24.1.3.2 ArrayBuffer.prototype\n    // 24.1.3.3 get ArrayBuffer [ @@species ]\n    // 24.1.4 Properties of the ArrayBuffer Prototype Object\n    // 24.1.4.1 get ArrayBuffer.prototype.byteLength\n    // 24.1.4.2 ArrayBuffer.prototype.constructor\n    // 24.1.4.3 ArrayBuffer.prototype.slice ( start , end)\n\n    // 24.1.4.4 ArrayBuffer.prototype [ @@toStringTag ]\n    define(ArrayBuffer.prototype, $$toStringTag, 'ArrayBuffer');\n\n    // 24.1.5 Properties of the ArrayBuffer Instances\n  }());\n\n  // ---------------------------------------\n  // 24.2 DataView Objects\n  // ---------------------------------------\n\n  // See typedarray.js for TypedArray polyfill\n\n  (function() {\n    if (!('DataView' in global))\n      return;\n\n    // 24.2.1 Abstract Operations For DataView Objects\n    // 24.2.1.1 GetViewValue(view, requestIndex, isLittleEndian, type)\n    // 24.2.1.2 SetViewValue(view, requestIndex, isLittleEndian, type, value)\n    // 24.2.2 The DataView Constructor\n    // 24.2.2.1 DataView (buffer [ , byteOffset [ , byteLength ] ] )\n    // 24.2.3 Properties of the DataView Constructor\n    // 24.2.3.1 DataView.prototype\n    // 24.2.4 Properties of the DataView Prototype Object\n    // 24.2.4.1 get DataView.prototype.buffer\n    // 24.2.4.2 get DataView.prototype.byteLength\n    // 24.2.4.3 get DataView.prototype.byteOffset\n    // 24.2.4.4 DataView.prototype.constructor\n    // 24.2.4.5 DataView.prototype.getFloat32 ( byteOffset [ , littleEndian ] )\n    // 24.2.4.6 DataView.prototype.getFloat64 ( byteOffset [ , littleEndian ] )\n    // 24.2.4.7 DataView.prototype.getInt8 ( byteOffset )\n    // 24.2.4.8 DataView.prototype.getInt16 ( byteOffset [ , littleEndian ] )\n    // 24.2.4.9 DataView.prototype.getInt32 ( byteOffset [ , littleEndian ] )\n    // 24.2.4.10 DataView.prototype.getUint8 ( byteOffset )\n    // 24.2.4.11 DataView.prototype.getUint16 ( byteOffset [ , littleEndian ] )\n    // 24.2.4.12 DataView.prototype.getUint32 ( byteOffset [ , littleEndian ] )\n    // 24.2.4.13 DataView.prototype.setFloat32 ( byteOffset, value [ , littleEndian ] )\n    // 24.2.4.14 DataView.prototype.setFloat64 ( byteOffset, value [ , littleEndian ] )\n    // 24.2.4.15 DataView.prototype.setInt8 ( byteOffset, value )\n    // 24.2.4.16 DataView.prototype.setInt16 ( byteOffset, value [ , littleEndian ] )\n    // 24.2.4.17 DataView.prototype.setInt32 ( byteOffset, value [ , littleEndian ] )\n    // 24.2.4.18 DataView.prototype.setUint8 ( byteOffset, value )\n    // 24.2.4.19 DataView.prototype.setUint16 ( byteOffset, value [ , littleEndian ] )\n    // 24.2.4.20 DataView.prototype.setUint32 ( byteOffset, value [ , littleEndian ] )\n\n    // 24.2.4.21 DataView.prototype[ @@toStringTag ]\n    define(DataView.prototype, $$toStringTag, 'DataView');\n\n    // 24.2.5 Properties of DataView Instances\n  }());\n\n  // ---------------------------------------\n  // 24.3 The JSON Object\n  // ---------------------------------------\n\n  // 24.3.1 JSON.parse ( text [ , reviver ] )\n  // 24.3.2 JSON.stringify ( value [ , replacer [ , space ] ] )\n  // 24.3.3 JSON [ @@toStringTag ]\n  define(JSON, $$toStringTag, 'JSON');\n\n  // ---------------------------------------\n  // 25.1 Iteration\n  // ---------------------------------------\n\n  // 25.1.1 Common Iteration Interfaces\n  // 25.1.1.1 The Iterable Interface\n  // 25.1.1.2 The Iterator Interface\n  // 25.1.1.3 The IteratorResult Interface\n\n  // 25.1.2 The %IteratorPrototype% Object\n  // Defined earlier, so other prototypes can reference it.\n  // 25.1.2.1 %IteratorPrototype% [ @@iterator ] ( )\n  define($IteratorPrototype$, $$iterator, function() {\n    return this;\n  });\n\n\n  // ---------------------------------------\n  // 25.4 Promise Objects\n  // ---------------------------------------\n\n  (function() {\n    // 25.4 Promise Objects\n\n    // 25.4.1 Promise Abstract Operations\n\n    // 25.4.1.1 PromiseCapability Records\n    // 25.4.1.1.1 IfAbruptRejectPromise ( value, capability )\n\n    function IfAbruptRejectPromise(value, capability) {\n      var rejectResult = capability['[[Reject]]'].call(undefined, value);\n      return capability['[[Promise]]'];\n    }\n\n    // 25.4.1.2 PromiseReaction Records\n\n    // 25.4.1.3 CreateResolvingFunctions ( promise )\n\n    function CreateResolvingFunctions(promise) {\n      var alreadyResolved = {'[[value]]': false};\n      var resolve = PromiseResolveFunction();\n      set_internal(resolve, '[[Promise]]',  promise);\n      set_internal(resolve, '[[AlreadyResolved]]', alreadyResolved);\n      var reject = PromiseRejectFunction();\n      set_internal(reject, '[[Promise]]', promise);\n      set_internal(reject, '[[AlreadyResolved]]', alreadyResolved);\n      return { '[[Resolve]]': resolve, '[[Reject]]': reject};\n    }\n\n    // 25.4.1.3.1 Promise Reject Functions\n\n    function PromiseRejectFunction() {\n      var F = function(reason) {\n        console.assert(Type(F['[[Promise]]']) === 'object');\n        var promise = F['[[Promise]]'];\n        var alreadyResolved = F['[[AlreadyResolved]]'];\n        if (alreadyResolved['[[value]]']) return undefined;\n        set_internal(alreadyResolved, '[[value]]', true);\n        return RejectPromise(promise, reason);\n      };\n      return F;\n    }\n\n    // 25.4.1.3.2 Promise Resolve Functions\n\n    function PromiseResolveFunction() {\n      var F = function(resolution) {\n        console.assert(Type(F['[[Promise]]']) === 'object');\n        var promise = F['[[Promise]]'];\n        var alreadyResolved = F['[[AlreadyResolved]]'];\n        if (alreadyResolved['[[value]]']) return undefined;\n        set_internal(alreadyResolved, '[[value]]', true);\n\n        if (SameValue(resolution, promise))  {\n          var selfResolutionError = TypeError();\n          return RejectPromise(promise, selfResolutionError);\n        }\n        if (Type(resolution) !== 'object')\n          return FulfillPromise(promise, resolution);\n        try {\n          var then = resolution['then'];\n        } catch(then) {\n          return RejectPromise(promise, then);\n        }\n        if (!IsCallable(then))\n          return FulfillPromise(promise, resolution);\n        EnqueueJob('PromiseJobs', PromiseResolveThenableJob, [promise, resolution, then]);\n        return undefined;\n      };\n      return F;\n    }\n\n    // 25.4.1.4 FulfillPromise ( promise, value )\n\n    function FulfillPromise(promise, value) {\n      console.assert(promise['[[PromiseState]]'] === 'pending');\n      var reactions = promise['[[PromiseFulfillReactions]]'];\n      set_internal(promise, '[[PromiseResult]]', value);\n      set_internal(promise, '[[PromiseFulfillReactions]]', undefined);\n      set_internal(promise, '[[PromiseRejectReactions]]', undefined);\n      set_internal(promise, '[[PromiseState]]', 'fulfilled');\n      return TriggerPromiseReactions(reactions, value);\n    }\n\n    // 25.4.1.5 NewPromiseCapability ( C )\n\n    function NewPromiseCapability(c) {\n      // To keep Promise hermetic, this doesn't look much like the spec.\n      return CreatePromiseCapabilityRecord(undefined, c);\n    }\n\n    // 25.4.1.5.1 CreatePromiseCapabilityRecord ( promise, constructor )\n\n    function CreatePromiseCapabilityRecord(promise, constructor) {\n      // To keep Promise hermetic, this doesn't look much like the spec.\n      console.assert(IsConstructor(constructor));\n      var promiseCapability = {};\n      set_internal(promiseCapability, '[[Promise]]', promise);\n      set_internal(promiseCapability, '[[Resolve]]', undefined);\n      set_internal(promiseCapability, '[[Reject]]', undefined);\n      var executor = GetCapabilitiesExecutor();\n      set_internal(executor, '[[Capability]]', promiseCapability);\n\n      // NOTE: Differs from spec; object is constructed here\n      var constructorResult = promise = new constructor(executor);\n      set_internal(promiseCapability, '[[Promise]]', promise);\n\n      if (!IsCallable(promiseCapability['[[Resolve]]'])) throw TypeError();\n      if (!IsCallable(promiseCapability['[[Reject]]'])) throw TypeError();\n      if (Type(constructorResult) === 'object' && !SameValue(promise, constructorResult)) throw TypeError();\n      return promiseCapability;\n    }\n\n    // 25.4.1.5.2 GetCapabilitiesExecutor Functions\n\n    function GetCapabilitiesExecutor() {\n      var F = function(resolve, reject) {\n        console.assert(F['[[Capability]]']);\n        var promiseCapability = F['[[Capability]]'];\n        if (promiseCapability['[[Resolve]]'] !== undefined) throw TypeError();\n        if (promiseCapability['[[Reject]]'] !== undefined) throw TypeError();\n        set_internal(promiseCapability, '[[Resolve]]', resolve);\n        set_internal(promiseCapability, '[[Reject]]', reject);\n        return undefined;\n      };\n      return F;\n    }\n\n    // 25.4.1.6 IsPromise ( x )\n\n    function IsPromise(x) {\n      if (Type(x) !== 'object') return false;\n      if (!('[[PromiseState]]' in x)) return false;\n      if (x['[[PromiseState]]'] === undefined) return false;\n      return true;\n    }\n\n    // 25.4.1.7 RejectPromise ( promise, reason )\n\n    function RejectPromise(promise, reason) {\n      console.assert(promise['[[PromiseState]]'] === 'pending');\n      var reactions = promise['[[PromiseRejectReactions]]'];\n      set_internal(promise, '[[PromiseResult]]', reason);\n      set_internal(promise, '[[PromiseFulfillReactions]]', undefined);\n      set_internal(promise, '[[PromiseRejectReactions]]', undefined);\n      set_internal(promise, '[[PromiseState]]', 'rejected');\n      return TriggerPromiseReactions(reactions, reason);\n    }\n\n    // 25.4.1.8 TriggerPromiseReactions ( reactions, argument )\n\n    function TriggerPromiseReactions(reactions, argument) {\n      for (var i = 0, len = reactions.length; i < len; ++i)\n        EnqueueJob('PromiseJobs', PromiseReactionJob, [reactions[i], argument]);\n      return undefined;\n    }\n\n    // 25.4.2 Promise Jobs\n\n    // 25.4.2.1 PromiseReactionJob ( reaction, argument )\n\n    function PromiseReactionJob(reaction, argument) {\n      var promiseCapability = reaction['[[Capabilities]]'];\n      var handler = reaction['[[Handler]]'];\n      var handlerResult, status;\n      try {\n        if (handler === 'Identity') handlerResult = argument;\n        else if (handler === 'Thrower') throw argument;\n        else handlerResult = handler.call(undefined, argument);\n      } catch (handlerResult) {\n        status = promiseCapability['[[Reject]]'].call(undefined, handlerResult);\n        NextJob(status); return;\n      }\n      status = promiseCapability['[[Resolve]]'].call(undefined, handlerResult);\n      NextJob(status);\n    }\n\n    // 25.4.2.2 PromiseResolveThenableJob ( promiseToResolve, thenable, then)\n\n    function PromiseResolveThenableJob(promiseToResolve, thenable, then) {\n      // SPEC BUG: promise vs. promiseToResolve\n      var resolvingFunctions = CreateResolvingFunctions(promiseToResolve);\n      try {\n        var thenCallResult = then.call(thenable, resolvingFunctions['[[Resolve]]'],\n                                       resolvingFunctions['[[Reject]]']);\n      } catch (thenCallResult) {\n        var status = resolvingFunctions['[[Reject]]'].call(undefined, thenCallResult);\n        NextJob(status); return;\n      }\n      NextJob(thenCallResult);\n    }\n\n    // 25.4.3 The Promise Constructor\n\n    // 25.4.3.1 Promise ( executor )\n\n    function Promise(executor) {\n      var config = { configurable: false, enumerable: false, writable: true, value: undefined };\n      Object.defineProperty(this, '[[PromiseState]]', config);\n      Object.defineProperty(this, '[[PromiseConstructor]]', config);\n      Object.defineProperty(this, '[[PromiseResult]]', config);\n      Object.defineProperty(this, '[[PromiseFulfillReactions]]', config);\n      Object.defineProperty(this, '[[PromiseRejectReactions]]', config);\n\n      var promise = this;\n      if (Type(promise) !== 'object') throw new TypeError();\n      if (!('[[PromiseState]]' in promise)) throw TypeError();\n      if (promise['[[PromiseState]]'] !== undefined) throw TypeError();\n      if (!IsCallable(executor)) throw TypeError();\n\n      set_internal(promise, '[[PromiseConstructor]]', Promise);\n\n      return InitializePromise(promise, executor);\n    }\n\n    // 25.4.3.1.1 InitializePromise ( promise, executor )\n\n    function InitializePromise(promise, executor) {\n      console.assert('[[PromiseState]]' in promise);\n      console.assert(IsCallable(executor));\n      set_internal(promise, '[[PromiseState]]', 'pending');\n      set_internal(promise, '[[PromiseFulfillReactions]]', []);\n      set_internal(promise, '[[PromiseRejectReactions]]', []);\n      var resolvingFunctions = CreateResolvingFunctions(promise);\n      try {\n        var completion = executor.call(undefined, resolvingFunctions['[[Resolve]]'],\n                                       resolvingFunctions['[[Reject]]']);\n      } catch (completion) {\n        var status = resolvingFunctions['[[Reject]]'].call(undefined, completion);\n      }\n      return promise;\n    }\n\n    // 25.4.4 Properties of the Promise Constructor\n    // 25.4.4.1 Promise.all ( iterable )\n\n    define(Promise, 'all', function all(iterable) {\n      var c = strict(this);\n      var promiseCapability = NewPromiseCapability(c);\n      try {\n        var iterator = GetIterator(iterable);\n      } catch (value) {\n        promiseCapability['[[Reject]]'].call(undefined, value);\n        return promiseCapability['[[Promise]]'];\n      }\n      var values = [];\n      var remainingElementsCount = { value: 1 };\n      var index = 0;\n      while (true) {\n        try {\n          var next = IteratorStep(iterator);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        if (!next) {\n          remainingElementsCount.value -= 1;\n          if (remainingElementsCount.value === 0) {\n            var resolveResult = promiseCapability['[[Resolve]]'].apply(undefined, values);\n\n\n          }\n          return promiseCapability['[[Promise]]'];\n        }\n        try {\n          var nextValue = IteratorValue(next);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        try {\n          var nextPromise = c.resolve(nextValue);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        var resolveElement = PromiseAllResolveElementFunction();\n        set_internal(resolveElement, '[[AlreadyCalled]]', { value: false });\n        set_internal(resolveElement, '[[Index]]', index);\n        set_internal(resolveElement, '[[Values]]', values);\n        set_internal(resolveElement, '[[Capabilities]]', promiseCapability);\n        set_internal(resolveElement, '[[RemainingElements]]', remainingElementsCount);\n        remainingElementsCount.value += 1;\n        try {\n          var result = nextPromise.then(resolveElement, promiseCapability['[[Reject]]']);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        index += 1;\n      }\n    });\n\n    // 25.4.4.1.1 Promise.all Resolve Element Functions\n\n    function PromiseAllResolveElementFunction() {\n      var F = function(x) {\n        var alreadyCalled = F['[[AlreadyCalled]]'];\n        if (alreadyCalled.value) return undefined;\n        alreadyCalled.value = true;\n        var index = F['[[Index]]'];\n        var values = F['[[Values]]'];\n        var promiseCapability = F['[[Capabilities]]'];\n        var remainingElementsCount = F['[[RemainingElements]]'];\n        try {\n          values[index] = x;\n        } catch (result) {\n          promiseCapability['[[Reject]]'].call(undefined, result);\n          return promiseCapability['[[Promise]]'];\n        }\n        remainingElementsCount.value -= 1;\n        if (remainingElementsCount.value === 0)\n          return promiseCapability['[[Resolve]]'].call(undefined, values);\n        return undefined;\n      };\n      return F;\n    }\n\n    // 25.4.4.2 Promise.prototype\n\n    Promise.prototype = {};\n\n    // 25.4.4.3 Promise.race ( iterable )\n\n    define(Promise, 'race', function race(iterable) {\n      var c = strict(this);\n      var promiseCapability = NewPromiseCapability(c);\n      try {\n        var iterator = GetIterator(iterable);\n      } catch (value) {\n        promiseCapability['[[Reject]]'].call(undefined, value);\n        return promiseCapability['[[Promise]]'];\n      }\n      while (true) {\n        try {\n          var next = IteratorStep(iterator);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        if (!next) return promiseCapability['[[Promise]]'];\n        try {\n          var nextValue = IteratorValue(next);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        try {\n          var nextPromise = c.resolve(nextValue);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n        try {\n          nextPromise.then(promiseCapability['[[Resolve]]'], promiseCapability['[[Reject]]']);\n        } catch (value) {\n          promiseCapability['[[Reject]]'].call(undefined, value);\n          return promiseCapability['[[Promise]]'];\n        }\n      }\n    });\n\n    // 25.4.4.4 Promise.reject ( r )\n\n    define(Promise, 'reject', function reject(r) {\n      var c = strict(this);\n      var promiseCapability = NewPromiseCapability(c);\n      var rejectResult = promiseCapability['[[Reject]]'].call(undefined, r);\n      return promiseCapability['[[Promise]]'];\n    });\n\n    // 25.4.4.5 Promise.resolve ( x )\n\n    define(Promise, 'resolve', function resolve(x) {\n      var c = strict(this);\n      if (IsPromise(x)) {\n        var constructor = x['[[PromiseConstructor]]'];\n        if (SameValue(constructor, c)) return x;\n      }\n      var promiseCapability = NewPromiseCapability(c);\n      var resolveResult = promiseCapability['[[Resolve]]'].call(undefined, x);\n      return promiseCapability['[[Promise]]'];\n    });\n\n    // 25.4.4.6 Promise [ @@create ] ( )\n    // 25.4.4.6.1 AllocatePromise ( constructor )\n    // 25.4.5 Properties of the Promise Prototype Object\n    // 25.4.5.1 Promise.prototype.catch ( onRejected )\n\n    define(Promise.prototype, 'catch', function catch_(onRejected) {\n      var promise = this;\n      return promise.then(undefined, onRejected);\n    });\n\n    // 25.4.5.2 Promise.prototype.constructor\n\n    Promise.prototype.constructor = Promise;\n\n    // 25.4.5.3 Promise.prototype.then ( onFulfilled , onRejected )\n\n    define(Promise.prototype, 'then', function then(onFulfilled, onRejected) {\n      var promise = this;\n      if (!IsPromise(promise)) throw TypeError();\n      if (!IsCallable(onFulfilled)) onFulfilled = 'Identity';\n      if (!IsCallable(onRejected)) onRejected = 'Thrower';\n      var c = promise.constructor;\n      var promiseCapability = NewPromiseCapability(c);\n      var fulfillReaction = { '[[Capabilities]]': promiseCapability,\n                              '[[Handler]]': onFulfilled };\n      var rejectReaction = { '[[Capabilities]]': promiseCapability,\n                             '[[Handler]]': onRejected };\n      if (promise['[[PromiseState]]'] === 'pending') {\n        promise['[[PromiseFulfillReactions]]'].push(fulfillReaction);\n        promise['[[PromiseRejectReactions]]'].push(rejectReaction);\n      } else if (promise['[[PromiseState]]'] === 'fulfilled') {\n        var value = promise['[[PromiseResult]]'];\n        EnqueueJob('PromiseJobs', PromiseReactionJob, [fulfillReaction, value]);\n      } else if (promise['[[PromiseState]]'] === 'rejected') {\n        var reason = promise['[[PromiseResult]]'];\n        EnqueueJob('PromiseJobs', PromiseReactionJob, [rejectReaction, reason]);\n      }\n      return promiseCapability['[[Promise]]'];\n    });\n\n    // 25.4.6 Properties of Promise Instances\n\n    if (!('Promise' in global) || OVERRIDE_NATIVE_FOR_TESTING)\n      global.Promise = Promise;\n\n    // Patch early Promise.cast vs. Promise.resolve implementations\n    if ('cast' in global.Promise) global.Promise.resolve = global.Promise.cast;\n  }());\n\n  // 25.4.5.1 Promise.prototype [ @@toStringTag ]\n  define(Promise.prototype, $$toStringTag, 'Promise');\n\n  // ---------------------------------------\n  // 26 Reflection\n  // ---------------------------------------\n\n  (function() {\n    // 26.1 The Reflect Object\n    if (!('Reflect' in global) || OVERRIDE_NATIVE_FOR_TESTING)\n      global.Reflect = {};\n\n    // 26.1.1 Reflect.apply ( target, thisArgument, argumentsList )\n    define(\n      Reflect, 'apply',\n      function apply(target, thisArgument, argumentsList) {\n        if (!IsCallable(target)) throw TypeError();\n        return Function.prototype.apply.call(target, thisArgument, argumentsList);\n      });\n\n    // 26.1.2 Reflect.construct ( target, argumentsList [, newTarget] )\n    define(\n      Reflect, 'construct',\n      function construct(target, argumentsList) {\n        return __cons(target, argumentsList);\n      });\n\n    // 26.1.3 Reflect.defineProperty ( target, propertyKey, attributes )\n    define(\n      Reflect, 'defineProperty',\n      function defineProperty(target, propertyKey, attributes) {\n        try {\n          Object.defineProperty(target, propertyKey, attributes);\n          return true;\n        } catch (_) {\n          return false;\n        }\n      });\n\n    // 26.1.4 Reflect.deleteProperty ( target, propertyKey )\n    define(\n      Reflect, 'deleteProperty',\n      function deleteProperty(target,name) {\n        try {\n          delete target[name];\n          return !HasOwnProperty(target, name);\n        } catch (_) {\n          return false;\n        }\n      });\n\n    // 26.1.5 Reflect.enumerate ( target )\n    define(\n      Reflect, 'enumerate',\n      function enumerate(target) {\n        target = ToObject(target);\n        var iterator = Enumerate(target);\n        return iterator;\n      });\n\n    // 26.1.6 Reflect.get ( target, propertyKey [ , receiver ])\n    define(\n      Reflect, 'get',\n      function get(target, name, receiver) {\n        target = ToObject(target);\n        name = String(name);\n        receiver = (receiver === undefined) ? target : ToObject(receiver);\n        var desc = getPropertyDescriptor(target, name);\n        if (desc && 'get' in desc)\n          return Function.prototype.call.call(desc['get'], receiver);\n        return target[name];\n      });\n\n    // 26.1.7 Reflect.getOwnPropertyDescriptor ( target, propertyKey )\n    define(\n      Reflect, 'getOwnPropertyDescriptor',\n      Object.getOwnPropertyDescriptor);\n\n    // 26.1.8 Reflect.getPrototypeOf ( target )\n    define(\n      Reflect, 'getPrototypeOf',\n      Object.getPrototypeOf);\n\n    // 26.1.9 Reflect.has ( target, propertyKey )\n    define(\n      Reflect, 'has',\n      function has(target,name) {\n        return String(name) in ToObject(target);\n      });\n\n    // 26.1.10 Reflect.isExtensible (target)\n    define(\n      Reflect, 'isExtensible',\n      Object.isExtensible);\n\n    // 26.1.11 Reflect.ownKeys ( target )\n    define(\n      Reflect, 'ownKeys',\n      function ownKeys(target) {\n        var obj = ToObject(target);\n        return Object.getOwnPropertyNames(obj);\n      });\n\n    // 26.1.12 Reflect.preventExtensions ( target )\n    define(\n      Reflect, 'preventExtensions',\n      function preventExtensions(target) {\n        try { Object.preventExtensions(target); return true; } catch (_) { return false; }\n      });\n\n    // 26.1.13 Reflect.set ( target, propertyKey, V [ , receiver ] )\n    define(\n      Reflect, 'set',\n      function set(target, name, value, receiver) {\n        target = ToObject(target);\n        name = String(name);\n        receiver = (receiver === undefined) ? target : ToObject(receiver);\n        var desc = getPropertyDescriptor(target, name);\n        try {\n          if (desc && 'set' in desc)\n            Function.prototype.call.call(desc['set'], receiver, value);\n          else\n            target[name] = value;\n          return true;\n        } catch (_) {\n          return false;\n        }\n      });\n\n    // 26.1.14 Reflect.setPrototypeOf ( target, proto )\n    define(\n      Reflect, 'setPrototypeOf',\n      function setPrototypeOf(target, proto) {\n        try {\n          target.__proto__ = proto;\n          return Reflect.getPrototypeOf(target) === proto;\n        } catch(_) {\n          return false;\n        }\n      });\n\n  }());\n\n  // ---------------------------------------\n  // 26.2 Proxy Objects\n  // ---------------------------------------\n\n  // Not polyfillable.\n\n}(self));\n\n// This helper is defined outside the main scope so that the use of\n// 'eval' does not taint the scope for minifiers.\nfunction __cons(t, a) {\n  return eval('new t(' + a.map(function(_, i) { return 'a[' + i + ']'; }).join(',') + ')');\n}\n"],"sourceRoot":""}